{"version":3,"sources":["webpack:///E:/cl_vue/erp-app/components/searchForm/searchForm.vue?8560","webpack:///E:/cl_vue/erp-app/components/searchForm/searchForm.vue?6c2f","webpack:///E:/cl_vue/erp-app/components/searchForm/searchForm.vue?a262","webpack:///E:/cl_vue/erp-app/components/searchForm/searchForm.vue?b93f","uni-app:///components/searchForm/searchForm.vue"],"names":[],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAuH;AACvH;AAC8D;AACL;;;AAGzD;AACoM;AACpM,gBAAgB,6MAAU;AAC1B,EAAE,gFAAM;AACR,EAAE,qFAAM;AACR,EAAE,8FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,yFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACtBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA,WAAW,+OAEN;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACnCA;AAAA;AAAA;AAAA;AAA+vB,CAAgB,oxBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0JnxB;AACA;;AAEA,gD;AACA;AACA,oBADA;AAEA,kCAFA;AAGA;AACA;AACA;AACA;AACA,kBADA;AAEA,kBAFA,EAHA;;AAOA;AACA,mBADA;AAEA,oBAFA,EAPA,EAHA;;;AAeA;AACA;AACA,iBAFA,yBAEA,MAFA,EAEA,MAFA,EAEA;AACA;AACA;AACA;AACA,KANA;AAOA;AACA,sBARA,8BAQA,MARA,EAQA,MARA,EAQA;AACA;AACA;AACA;AACA,KAZA,EAfA;;AA6BA,MA7BA,kBA6BA;AACA;AACA,2BADA,EACA;AACA;AACA,4BADA;AAEA,wBAFA;AAGA,0BAHA;AAIA,qBAJA,EAIA;AACA,wBALA,CAKA;AALA,OAFA;AASA,0BATA;AAUA,2BAVA;AAWA,yBAXA;AAYA,+EAZA,EAYA;AACA,6DAbA,EAaA;AACA,+BAdA,EAcA;AACA,+BAfA,EAeA;AACA,6BAhBA,EAgBA;AACA,sBAjBA,EAiBA;AACA,uBAlBA,EAkBA;AACA,4BAnBA,EAmBA;AACA,6BApBA,EAoBA;AACA,yBArBA,EAqBA;AACA,0FAtBA,EAsBA;AACA,mEAvBA,EAuBA;AACA,sBAxBA,EAwBA;AACA,sBAzBA,EAyBA;AACA,uBA1BA,CA0BA;AA1BA;;AA6BA,GA3DA;;;;;;;AAkEA,SAlEA,qBAkEA;;AAEA,GApEA;;AAsEA;AACA;AACA,kBAFA,4BAEA;AACA;AACA;AACA;AACA,SAFA;AAGA,OAJA,MAIA;AACA;AACA;AACA,KAVA;AAWA;AACA,kBAZA,4BAYA;AACA;AACA;AACA;AACA,SAFA;AAGA,OAJA,MAIA;AACA;AACA;AACA,KApBA;AAqBA;AACA,oBAtBA,4BAsBA,IAtBA,EAsBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAZA;;AAcA,KAvCA;AAwCA,+GAxCA;AAyCA;AACA,kBA1CA,4BA0CA;AACA;AACA;AACA;AACA;AACA;AACA,OAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA;AACA;AACA,KAtEA;AAuEA;AACA,gBAxEA,wBAwEA,OAxEA,EAwEA,SAxEA,EAwEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA;AACA;AACA;AACA,KAxFA;AAyFA,mBAzFA,6BAyFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBADA;;;AAIA;AACA;AACA;AACA;AACA,OAJA,EAIA,KAJA,CAIA;AACA;AACA,uCADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OAVA;AAWA,KA9GA;AA+GA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAhIA,8BAgIA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA,CACA;AADA;;AAIA;AACA;AACA;AACA;AACA,OAJA,EAIA,KAJA,CAIA;AACA;AACA,sCADA;AAEA,sBAFA;AAGA,wBAHA;;AAKA,OAVA;AAWA,KArJA;AAsJA;AACA,mBAvJA,2BAuJA,GAvJA,EAuJA;AACA;AACA;AACA;AACA;AACA,KA5JA;AA6JA;AACA,yBA9JA,iCA8JA,GA9JA,EA8JA;AACA;AACA;AACA;AACA;AACA,KAnKA;AAoKA;AACA,wBArKA,gCAqKA,GArKA,EAqKA;AACA;AACA;AACA;AACA;AACA,KA1KA;AA2KA;AACA,oBA5KA,8BA4KA;AACA;AACA;AACA,KA/KA;AAgLA;AACA,oBAjLA,8BAiLA;AACA;AACA;AACA,KApLA;AAqLA;AACA,kBAtLA,0BAsLA,IAtLA,EAsLA;AACA;AACA;AACA,KAzLA;AA0LA;AACA,iBA3LA,yBA2LA,GA3LA,EA2LA;AACA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAlMA;AAmMA;AACA,gBApMA,0BAoMA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sDADA;AAEA,iCAFA;AAGA,6BAHA;AAIA,+EAJA;;AAMA;AACA;AACA;AACA;AACA,KApNA;AAqNA,eArNA,yBAqNA;AACA;AACA;AACA,KAxNA;AAyNA;AACA,QA1NA,kBA0NA;AACA;AACA,KA5NA;AA6NA;AACA,SA9NA,mBA8NA;AACA;AACA,KAhOA,GAtEA,E","file":"components/searchForm/searchForm.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./searchForm.vue?vue&type=template&id=c4ae3778&\"\nvar renderjs\nimport script from \"./searchForm.vue?vue&type=script&lang=js&\"\nexport * from \"./searchForm.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/searchForm/searchForm.vue\"\nexport default component.exports","export * from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--16-0!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./searchForm.vue?vue&type=template&id=c4ae3778&\"","var components = {\n  wPicker: function() {\n    return import(\n      /* webpackChunkName: \"components/w-picker/w-picker\" */ \"@/components/w-picker/w-picker.vue\"\n    )\n  }\n}\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  if (!_vm._isMounted) {\n    _vm.e0 = function($event) {\n      _vm.customerInfo = \"\"\n    }\n\n    _vm.e1 = function($event) {\n      _vm.SalesmanSearch.SalesmanItemText = \"\"\n    }\n\n    _vm.e2 = function($event) {\n      _vm.SalesmanSearch.isShow = false\n    }\n\n    _vm.e3 = function($event) {\n      _vm.isShowCustomerList = false\n    }\n\n    _vm.e4 = function($event) {\n      _vm.isShowProList = false\n    }\n  }\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./searchForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--12-1!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!F:\\\\HBuilderX.2.2.2.20190816.full\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./searchForm.vue?vue&type=script&lang=js&\"","<template>\n\t<view>\r\n\t\t\n\t\t<!-- 搜索框弹出  -->\r\n\t\t<view class=\"cu-modal bottom-modal\" :class=\"isShowSearchForm ? 'show':''\">\r\n\t\t\t<view class=\"cu-dialog\">\r\n\t\t\t\t<view class=\"cu-bar bg-white\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view class=\"action text-blue\" @tap=\"cancelEvent\">取消</view>\r\n\t\t\t\t\t<view class=\"action text-green\" @tap=\"comfirmEvent\">确定</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"text-left padding-sm\">\r\n\t\t\t\t\t<form>\r\n\t\t\t\t\t\t<!-- <view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">类　　型</view>\r\n\t\t\t\t\t\t\t<input disabled v-model=\"productTypeText\" placeholder=\"请选择类型(纸板,纸箱...)\" name=\"input\"></input>\r\n\t\t\t\t\t\t\t<button @click=\"isShowProList=true\" class='cu-btn bg-green shadow'>选择</button>\r\n\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">快速方式</view>\r\n\t\t\t\t\t\t\t<button @click=\"handleFilterData('week')\" :class=\"currentFilterType==='week'? 'cu-btn bg-orange': 'cu-btn line-orange'\" >本周</button>\r\n\t\t\t\t\t\t\t<button @click=\"handleFilterData('month')\" :class=\"currentFilterType==='month'? 'cu-btn bg-orange': 'cu-btn line-orange'\">本月</button>\r\n\t\t\t\t\t\t\t<button @click=\"handleFilterData('season')\" :class=\"currentFilterType==='season'? 'cu-btn bg-orange': 'cu-btn line-orange'\">本季</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">开始日期</view>\r\n\t\t\t\t\t\t\t<input disabled=\"true\" placeholder=\"输入开始日期\" v-model=\"startDate\" name=\"input\"></input>\r\n\t\t\t\t\t\t\t<button @click=\"openDateSelect('start')\" class='cu-btn bg-green shadow'>日期</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">结束日期</view>\r\n\t\t\t\t\t\t\t<input disabled=\"true\" v-model=\"endDate\" placeholder=\"输入框结束日期\" name=\"input\"></input>\r\n\t\t\t\t\t\t\t<button @click=\"openDateSelect('end')\" class='cu-btn bg-green shadow'>日期</button>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">客　　户</view>\r\n\t\t\t\t\t\t\t<input disabled v-model=\"customerInfo\" placeholder=\"请选择客户\" name=\"input\"></input>\r\n\t\t\t\t\t\t\t<button @click=\"customerInfo=''\" class='margin-right cu-btn round line-green'>清空</button>\r\n\t\t\t\t\t\t\t<button @click=\"openCustomerList\" class='cu-btn bg-green shadow'>选择</button>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<view v-if=\"needSalemanList\" class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\"> 业 务 员 </view>\r\n\t\t\t\t\t\t\t<input disabled v-model=\"SalesmanSearch.SalesmanItemText\" placeholder=\" 请选择客户\" name=\"input\"></input>\r\n\t\t\t\t\t\t\t<button @click=\"SalesmanSearch.SalesmanItemText=''\" class='margin-right cu-btn round line-green'>清空</button>\r\n\t\t\t\t\t\t\t<button @click=\"openSalesmanList\" class='cu-btn bg-green shadow'>选择</button>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</form>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\t\t<!-- 搜索框弹出 end-->\r\n\t\t\r\n\t\t<!-- 时间选择器 -->\r\n\t\t<w-picker\r\n\t\t    mode=\"date\" \r\n\t\t    startYear=\"2016\" \r\n\t\t    :endYear=\"endYear\"\r\n\t\t    :defaultVal=\"[0,0,0]\" \r\n\t\t    :current=\"true\"\r\n\t\t    @confirm=\"onConfirmDate\" \r\n\t\t    ref=\"DatePicker\" \r\n\t\t    themeColor=\"#f00\">\r\n\t\t</w-picker>\r\n\t\t<!-- 业务员信息列表 -->\r\n\t\t<view @tap=\"SalesmanSearch.isShow=false\" class=\"cu-modal drawer-modal justify-start\" :class=\"SalesmanSearch.isShow ?'show':''\">\r\n\t\t\t\r\n\t\t\t<view class=\"cu-dialog basis-lg\" @tap.stop=\"\" :style=\"[{top:CustomBar+'px',height:'calc(100vh - ' + CustomBar + 'px)'}]\">\r\n\t\t\t\t\r\n\t\t\t\t\t<view :style=\"[{overflow:'scroll',  height:'calc(100vh - ' + CustomBar + 'px)'}]\" class=\"cu-list menu text-left\">\r\n\t\t\t\t\t\t\t<view  class=\"cu-item\">\r\n\t\t\t\t\t\t\t\t<!-- 搜索框 -->\r\n\t\t\t\t\t\t\t\t<view class=\"cu-bar bg-white search \">\r\n\t\t\t\t\t\t\t\t\t<view class=\"search-form round\">\r\n\t\t\t\t\t\t\t\t\t\t<text class=\"cuIcon-search\"></text>\r\n\t\t\t\t\t\t\t\t\t\t<input v-model=\"searchKeyword_sale\" type=\"text\" placeholder=\"关键词\" confirm-type=\"search\"></input>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t\t\t\t\t<button @click=\"filterSaleList()\" class=\"cu-btn bg-gradual-green shadow-blur round\">搜索</button>\r\n\t\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<!-- 搜索框 -->\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view @click=\"getSalesmanInfo(item)\"  class=\"cu-item arrow\" v-for=\"(item,index) in SalesmanSearch.SalesmanList\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<view  style=\"overflow: scroll;\" class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<view v-text=\"item.w_Name\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\n\t\t<!-- 客户信息列表 -->\r\n\t\t<view @tap=\"isShowCustomerList=false\" class=\"cu-modal drawer-modal justify-start\" :class=\"isShowCustomerList ?'show':''\">\r\n\t\t\t\r\n\t\t\t<view class=\"cu-dialog basis-lg\" @tap.stop=\"\" :style=\"[{top:CustomBar+'px',height:'calc(100vh - ' + CustomBar + 'px)'}]\">\r\n\t\t\t\t\r\n\t\t\t\t\t<view :style=\"[{overflow:'scroll',  height:'calc(100vh - ' + CustomBar + 'px)'}]\" class=\"cu-list menu text-left\">\r\n\t\t\t\t\t\t    <view  class=\"cu-item\">\r\n\t\t\t\t\t\t    \t<!-- 搜索框 -->\r\n\t\t\t\t\t\t    \t<view class=\"cu-bar bg-white search \">\r\n\t\t\t\t\t\t    \t\t<view class=\"search-form round\">\r\n\t\t\t\t\t\t    \t\t\t<text class=\"cuIcon-search\"></text>\r\n\t\t\t\t\t\t    \t\t\t<input v-model=\"searchKeyword\" type=\"text\" placeholder=\"关键词\" confirm-type=\"search\"></input>\r\n\t\t\t\t\t\t    \t\t</view>\r\n\t\t\t\t\t\t    \t\t<view class=\"action\">\r\n\t\t\t\t\t\t    \t\t\t<button @click=\"filterCustomer()\" class=\"cu-btn bg-gradual-green shadow-blur round\">搜索</button>\r\n\t\t\t\t\t\t    \t\t</view>\r\n\t\t\t\t\t\t    \t</view>\r\n\t\t\t\t\t\t    \t<!-- 搜索框 -->\r\n\t\t\t\t\t\t    </view>\r\n\t\t\t\t\t\t\t<view @click=\"getSelectCustomerInfo(item)\"  class=\"cu-item arrow\" v-for=\"(item,index) in customerList\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<view  style=\"overflow: scroll;\" class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<view v-text=\"item.ct_Desc\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\r\n\t\t<!-- 产品类型列表 -->\r\n\t\t<view @tap=\"isShowProList=false\" class=\"cu-modal drawer-modal justify-start\" :class=\"isShowProList ?'show':''\">\r\n\t\t\t\r\n\t\t\t<view class=\"cu-dialog basis-lg\" @tap.stop=\"\" :style=\"[{top:CustomBar+'px',height:'calc(100vh - ' + CustomBar + 'px)'}]\">\r\n\t\t\t\t\r\n\t\t\t\t\t<view :style=\"[{overflow:'scroll',  height:'calc(100vh - ' + CustomBar + 'px)'}]\" class=\"cu-list menu text-left\">\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t<view @click=\"getSelectProtypeInfo(item)\"  class=\"cu-item arrow\" v-for=\"(item,index) in productType\" :key=\"index\">\r\n\t\t\t\t\t\t\t\t<view  style=\"overflow: scroll;\" class=\"content\">\r\n\t\t\t\t\t\t\t\t\t<view v-text=\"item.ct_Desc\"></view>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</view>\r\n\t\t\t\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t</view>\r\n\t\t\t\r\n\t</view>\n</template>\n\n<script>\r\n\t/**\r\n\t * 搜索框\r\n\t * */\r\n\t import { getDate, dataDiff } from \"@/libs/tools\";\r\n\t import dayjs from 'dayjs'\r\n\t import wPicker from \"@/components/w-picker/w-picker.vue\";\r\n\t import {mapActions} from 'vuex'\n\t export default {\r\n\t\tname:'searchForm',\r\n\t\tcomponents:{wPicker},\r\n\t\tprops:{\r\n\t\t\t//搜索条件：\r\n\t\t\t//ct_Type(客户类型)0:全部,1:纸箱,2:纸板,3:蜂窝 多个逗号分开\r\n\t\t\tcustomerType:{\r\n\t\t\t\ttype:String,\r\n\t\t\t\tdefault:'0'\r\n\t\t\t},\r\n\t\t\tneedSalemanList:{\r\n\t\t\t\ttype:Boolean,\r\n\t\t\t\tdefault:false\r\n\t\t\t}\r\n\t\t},\r\n\t\twatch:{\r\n\t\t\t//时刻监控字段 \r\n\t\t\tsearchKeyword(newVal,oldVal){\r\n\t\t\t\tif(newVal.length==0){\r\n\t\t\t\t  return this.customerList = this.customerList_filter\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//时刻监控字段 \r\n\t\t\tsearchKeyword_sale(newVal,oldVal){\r\n\t\t\t\tif(newVal.length==0){\r\n\t\t\t\t  return this.SalesmanSearch.SalesmanList = this.saleList_filter\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\n\t\tdata() {\n\t\t\treturn {\r\n\t\t\t\tcurrentFilterType:'',//当前查询类型：周 week 月 month 季 season 是否选择，选中为 primary\r\n\t\t\t\tSalesmanSearch:{\r\n\t\t\t\t\tSalesmanItemText:'',\r\n\t\t\t\t\tSalesmanItem:{},\r\n\t\t\t\t\tSalesmanItemId:'',\r\n\t\t\t\t\tisShow:false,//是否显示业务员列表\r\n\t\t\t\t\tSalesmanList:[],//业务员列表\r\n\t\t\t\t},\r\n\t\t\t\tisShowProList:false,\r\n\t\t\t\tproductTypeText:'纸板',\r\n\t\t\t\tproductTypeItem:{},\r\n\t\t\t\tproductType:[{type:'1',ct_Desc:'纸板'},{type:'2',ct_Desc:'纸箱'}],//产品类型(1纸板,2纸箱...)\r\n\t\t\t\tendYear:dayjs(Date.now()).format('YYYY'),//当前年份\r\n\t\t\t\tCustomBar: this.CustomBar, //uni-app :内置属性，bar :高度\r\n\t\t\t\tisShowCustomerList:false,//是否显示客户信息列表\n\t\t\t\tisShowSearchForm:false,//当前是否打开状态\r\n\t\t\t\tcustomerList:[],//客户列表\r\n\t\t\t\tsearchKeyword:'',//过滤关键字\r\n\t\t\t\tsearchKeyword_sale:'',//过滤关键字\r\n\t\t\t\tcustomerList_filter:[],//客户列表\r\n\t\t\t\tsaleList_filter:[],//业务员列表COPY\r\n\t\t\t\tstartDate:dayjs(Date.now()).subtract(1, 'month').format('YYYY-MM-DD'),//开始时间\r\n\t\t\t\tendDate:dayjs(Date.now()).format('YYYY-MM-DD'),//结束时间\r\n\t\t\t\tcustomerInfo:'',//客户信息\r\n\t\t\t\tcustomerItem:{},//客户信息 对象\r\n\t\t\t\tdataType:'start',//开始时间:start,结束时间:end\r\n\t\t\t\t\n\t\t\t}\n\t\t},\r\n\t\t// #ifdef H5\r\n\t\tmounted() {\r\n\t\t\r\n\t\t},\r\n\t\t// #endif\r\n\t\t// #ifndef H5\r\n\t\tonReady() {\r\n\t\t\r\n\t\t},\r\n\t\t// #endif\n\t\tmethods: {\r\n\t\t\t//过滤用户\r\n\t\t\tfilterCustomer(){\r\n\t\t\t\tif(this.searchKeyword.length>0){\r\n\t\t\t\t\tthis.customerList = this.customerList.filter(item=>{\r\n\t\t\t\t\t\treturn item.ct_Desc.includes(this.searchKeyword)\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.customerList = this.customerList_filter\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//业务员过滤\r\n\t\t\tfilterSaleList(){\r\n\t\t\t\tif(this.searchKeyword_sale.length>0){\r\n\t\t\t\t\tthis.SalesmanSearch.SalesmanList = this.SalesmanSearch.SalesmanList.filter(item=>{\r\n\t\t\t\t\t\treturn item.w_Name.includes(this.searchKeyword_sale)\r\n\t\t\t\t\t})\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.SalesmanSearch.SalesmanList = this.saleList_filter\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//切換按鈕事件 周 月 季\r\n\t\t\thandleFilterData(type){\r\n\t\t\t\t//debugger\r\n\t\t\t    this.currentFilterType =type\r\n\t\t\t    switch(type){\r\n\t\t\t      case 'week':\r\n\t\t\t        this.startDate =dayjs(Date.now()).startOf('week').format('YYYY-MM-DD')\r\n\t\t\t        this.endDate =dayjs(Date.now()).format('YYYY-MM-DD')\r\n\t\t\t         break\r\n\t\t\t      case 'month':\r\n\t\t\t        this.startDate =dayjs(Date.now()).startOf('month').format('YYYY-MM-DD')\r\n\t\t\t        this.endDate =dayjs(Date.now()).format('YYYY-MM-DD')\r\n\t\t\t        break \r\n\t\t\t      case 'season':\r\n\t\t\t        this.startDate =dayjs(Date.now()).subtract(3, 'month').format('YYYY-MM-DD')\r\n\t\t\t        this.endDate =dayjs(Date.now()).format('YYYY-MM-DD')\r\n\t\t\t        break\r\n\t\t\t    }\r\n\t\t\t},\r\n\t\t\t...mapActions(['getSalesmanList_action','getCustomerInfo_action','getQutationCustomerList_action']),\r\n\t\t\t//验证两个输入的日期 是否有效\r\n\t\t\tcheckInputData() {\r\n\t\t\t  let flag = true;\r\n\t\t\t  let msg = \"\";\r\n\t\t\t  if (this.startDate == \"\" || this.endDate == \"\") {\r\n\t\t\t    msg = \"起始/结束日期必填\";\r\n\t\t\t    flag = false;\r\n\t\t\t  } else if (this.startDate != \"\" || this.endDate != \"\") {\r\n\t\t\t    let date1 = this.stringToDate(this.startDate);\r\n\t\t\t    let date2 = this.stringToDate(this.endDate);\r\n\t\t\t    let diff = dataDiff(\"d\", date1, date2);\r\n\t\t\t    if (diff > 730) {\r\n\t\t\t      msg = \"时间间隔不能超过2年\";\r\n\t\t\t      flag = false;\r\n\t\t\t    }\r\n\t\t\t    if (diff < 0) {\r\n\t\t\t      msg = \"结束日期必须大于起始日期\";\r\n\t\t\t      flag = false;\r\n\t\t\t    }\r\n\t\t\t  }\r\n\t\t\t\r\n\t\t\t  if (msg != \"\") {\r\n\t\t\t    uni.showToast({\r\n\t\t\t    \ttitle:msg,\r\n\t\t\t\t\ticon:'none',\r\n\t\t\t\t\tduration:2000\r\n\t\t\t    })\r\n\t\t\t  }\r\n\t\t\t  return flag;\r\n\t\t\t},\r\n\t\t\t//字符串转日期\r\n\t\t\tstringToDate(dateStr, separator) {\r\n\t\t\t  if (!separator) {\r\n\t\t\t    separator = \"-\";\r\n\t\t\t  }\r\n\t\t\t  let dateArr = dateStr.split(separator);\r\n\t\t\t  let year = parseInt(dateArr[0]);\r\n\t\t\t  let month;\r\n\t\t\t  //处理月份为04这样的情况\r\n\t\t\t  if (dateArr[1].indexOf(\"0\") == 0) {\r\n\t\t\t    month = parseInt(dateArr[1].substring(1));\r\n\t\t\t  } else {\r\n\t\t\t    month = parseInt(dateArr[1]);\r\n\t\t\t  }\r\n\t\t\t  let day = parseInt(dateArr[2]);\r\n\t\t\t  let date = new Date(year, month - 1, day);\r\n\t\t\t  return date;\r\n\t\t\t},\r\n\t\t\tgetSalesmanList(){\r\n\t\t\t\tif(this.SalesmanSearch.SalesmanList.length>0){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t//搜索条件：\r\n\t\t\t\t//w_OptType(类型)0:业务员,其它 暂时 没有\r\n\t\t\t\tlet params ={\r\n\t\t\t\t\tw_OptType: 0\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.getSalesmanList_action(params).then(res=>{\r\n\t\t\t\t\t//debugger\r\n\t\t\t\t\tthis.SalesmanSearch.SalesmanList =res.records\r\n\t\t\t\t\tthis.saleList_filter = [...this.SalesmanSearch.SalesmanList]\r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'获取业务员列表失败 err:'+err,\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\tduration:2000\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t// loadCustomerList(){\r\n\t\t\t// \t//debugger\r\n\t\t\t// \tif(this.customerList.length>0){\r\n\t\t\t// \t\t//debugger\r\n\t\t\t// \t\treturn\r\n\t\t\t// \t}\r\n\t\t\t// \tlet params ={}\r\n\t\t\t// \tthis.getCustomerInfo_action(params).then(res=>{\r\n\t\t\t// \t\tthis.customerList =res\r\n\t\t\t// \t}).catch(err=>{\r\n\t\t\t// \t\tuni.showToast({\r\n\t\t\t// \t\t\ttitle:'获取客户列表失败 err:'+err,\r\n\t\t\t// \t\t\ticon:'none',\r\n\t\t\t// \t\t\tduration:2000\r\n\t\t\t// \t\t})\r\n\t\t\t// \t})\r\n\t\t\t// },\r\n\t\t\tloadCustomerList(){\r\n\t\t\t\tif(this.customerList.length>0){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\t//搜索条件：\r\n\t\t\t\t//ct_Type(客户类型)0:全部,1:纸箱,2:纸板,3:蜂窝 多个逗号分开\r\n\t\t\t\tlet params ={\r\n\t\t\t\t\tct_Type:0// this.customerType\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tthis.getQutationCustomerList_action(params).then(res=>{\r\n\t\t\t\t\t//debugger\r\n\t\t\t\t\tthis.customerList =res.records\r\n\t\t\t\t\tthis.customerList_filter = [...this.customerList] \r\n\t\t\t\t}).catch(err=>{\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'获取客户列表失败 err:'+err,\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\tduration:2000\r\n\t\t\t\t\t})\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\t//获取选择的业务员信息\r\n\t\t\tgetSalesmanInfo(val){\r\n\t\t\t\tthis.SalesmanSearch.isShow =false\r\n\t\t\t\tthis.SalesmanSearch.SalesmanItemText =val.w_Name\r\n\t\t\t\tthis.SalesmanSearch.SalesmanItemId =val.w_ID\r\n\t\t\t\tthis.SalesmanSearch.SalesmanItem =val\r\n\t\t\t},\r\n\t\t\t//获取选择的客户信息\r\n\t\t\tgetSelectCustomerInfo(val){\r\n\t\t\t\tthis.isShowCustomerList =false\r\n\t\t\t\tthis.customerInfo = val.ct_Desc\r\n\t\t\t\tthis.customerItem =val\r\n\t\t\t\t//console.warn('currentItem:'+val.ct_ID)\r\n\t\t\t},\r\n\t\t\t//获取选择的产品类型信息\r\n\t\t\tgetSelectProtypeInfo(val){\r\n\t\t\t\tthis.isShowProList =false\r\n\t\t\t\tthis.productTypeText = val.ct_Desc\r\n\t\t\t\tthis.customerItem =val\r\n\t\t\t\t//console.warn('currentItem:'+val.ct_ID)\r\n\t\t\t},\r\n\t\t\t//打开客户信息\r\n\t\t\topenCustomerList(){\r\n\t\t\t\tthis.isShowCustomerList =true\r\n\t\t\t\tthis.loadCustomerList()\r\n\t\t\t},\r\n\t\t\t//打开业务员列表\r\n\t\t\topenSalesmanList(){\r\n\t\t\t\tthis.SalesmanSearch.isShow = true\r\n\t\t\t\t this.getSalesmanList()\r\n\t\t\t},\r\n\t\t\t//弹出时间选择器\r\n\t\t\topenDateSelect(type){\r\n\t\t\t\tthis.dataType =type\r\n\t\t\t\tthis.$refs.DatePicker.show();\r\n\t\t\t},\r\n\t\t\t//时间确认-回调事件\r\n\t\t\tonConfirmDate(val){\r\n\t\t\t\t//console.log('date now:'+ JSON.stringify(val))\r\n\t\t\t\tif(this.dataType==='start'){\r\n\t\t\t\t\tthis.startDate =val.result\r\n\t\t\t\t}else{\r\n\t\t\t\t\tthis.endDate = val.result\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t//确认搜索-回调事件\r\n\t\t\tcomfirmEvent(){\r\n\t\t\t\t//debugger\r\n\t\t\t\tif(!this.checkInputData()){\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthis.isShowSearchForm = false\r\n\t\t\t\tlet params = {\r\n\t\t\t\t  ct_SalerId:this.SalesmanSearch.SalesmanItemId,\r\n\t\t\t\t  startDate:this.startDate,\r\n\t\t\t\t  endDate:this.endDate,\r\n\t\t\t\t  ctCode:this.customerItem.ct_ID === null ?'':this.customerItem.ct_ID\r\n\t\t\t\t}\r\n\t\t\t\tif(this.customerInfo==''){\r\n\t\t\t\t\tparams.ctCode=''\r\n\t\t\t\t}\r\n\t\t\t\tthis.$emit('comfirmEvent',params)\r\n\t\t\t},\r\n\t\t\tcancelEvent(){\r\n\t\t\t\tthis.isShowSearchForm=false\r\n\t\t\t\tthis.$emit('cancelEvent','cancel')\r\n\t\t\t},\r\n\t\t\t//显示搜索框\n\t\t\topen(){\r\n\t\t\t\tthis.isShowSearchForm = true\r\n\t\t\t},\r\n\t\t\t//关闭搜索框\r\n\t\t\tclose(){\r\n\t\t\t\tthis.isShowSearchForm = false\r\n\t\t\t}\n\t\t}\n\t}\n</script>\n\n<style>\n\n</style>\n"],"sourceRoot":""}