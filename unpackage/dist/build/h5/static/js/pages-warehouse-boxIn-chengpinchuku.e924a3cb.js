(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-boxIn-chengpinchuku"],{1825:function(t,e,i){"use strict";var a=i("f120"),o=i.n(a);o.a},"19a4":function(t,e,i){var a=i("24fb");e=a(!1),e.push([t.i,".margin-text-center[data-v-e97f0edc]{text-align:center;margin:%?20?%}.border-top[data-v-e97f0edc]{border-top:1px solid #eee}.cu-form-group .title[data-v-e97f0edc]{min-width:calc(4em + 15px)}.updete[data-v-e97f0edc]{width:33%;display:-webkit-box;display:-webkit-flex;display:flex;\r\n\t/* margin: 10px 10px; */-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.chucangbtm[data-v-e97f0edc]{position:fixed;bottom:0;width:100%;background-color:#fff;z-index:10}.xunhoutop[data-v-e97f0edc]{position:fixed;width:100%;z-index:100}",""]),t.exports=e},"38b9":function(t,e,i){"use strict";i.r(e);var a=i("3ed1"),o=i("f76d");for(var s in o)"default"!==s&&function(t){i.d(e,t,(function(){return o[t]}))}(s);i("1825");var n,r=i("f0c5"),u=Object(r["a"])(o["default"],a["b"],a["c"],!1,null,"e97f0edc",null,!1,a["a"],n);e["default"]=u.exports},"3ed1":function(t,e,i){"use strict";var a;i.d(e,"b",(function(){return o})),i.d(e,"c",(function(){return s})),i.d(e,"a",(function(){return a}));var o=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸箱成品出库")])],2),i("v-uni-form",{staticClass:"xunhoutop"},[i("v-uni-view",{staticClass:"bodyContentHeight"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("订单号:")]),i("v-uni-input",{attrs:{placeholder:"请输入或扫描订单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.boxInGetOrderInfo.apply(void 0,arguments)}},model:{value:t.boxOut.formItem.bi_OrderNo,callback:function(e){t.$set(t.boxOut.formItem,"bi_OrderNo",e)},expression:"boxOut.formItem.bi_OrderNo"}}),i("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("orderNo")}}},[t._v("扫描")])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"40px"}}),t._l(t.fromdata,(function(e,a){return i("v-uni-view",{key:a,staticClass:"grid-warp"},[i("v-uni-view",{staticClass:"grid-title"},[i("v-uni-view",[t._v("订单号:"+t._s(e.bcNo)+"  工单号:"+t._s(e.WorkNo))]),i("v-uni-view",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deletebox(a)}}},[i("v-uni-text",{staticStyle:{color:"red"}},[t._v("删除")])],1)],1),i("v-uni-view",{staticClass:"grid-body"},[i("v-uni-view",[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("客户:"+t._s(e.CustName))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("客户PO:"+t._s(e.CustPO))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("产品:"+t._s(e.ProdNo)+","+t._s(e.ProdName))])],1),i("v-uni-view",{staticClass:"grid-flex"},[2==e.ProdType?i("v-uni-view",[i("v-uni-text",{staticStyle:{color:"#007AFF"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.inKit(a)}}},[t._v("套件明细")])],1):t._e()],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("规格:"+t._s(e.BoxInfo))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("料号:"+t._s(e.BatchNo))])],1),i("v-uni-view",[i("v-uni-text",[t._v("未送:"+t._s(e.NoDelQty))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("入库:"+t._s(e.InStoreQty))])],1),i("v-uni-view",[i("v-uni-text",[t._v("库存:"+t._s(e.StoreQty))])],1),i("v-uni-view",{staticStyle:{color:"red"}},[i("v-uni-text",{staticStyle:{"margin-right":"5px"}},[t._v("送货:"+t._s(e.DelQty))]),i("v-uni-text",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updatebox(a)}}},[t._v("修改")])],1)],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"})],1)],1)})),i("v-uni-view",{staticClass:"cu-modal",class:"DialogModal2"==t.modalName?"show":"",staticStyle:{"z-index":"100"}},[i("v-uni-view",{staticClass:"cu-dialog"},[i("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[i("v-uni-view",{staticClass:"content"},[t._v(t._s(t.modalTitle))]),i("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[i("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),i("v-uni-view",{staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",{staticStyle:{color:"red"}},[i("v-uni-text",[t._v("订单号:"+t._s(t.deletefrom.bcNo))])],1),i("v-uni-view",[i("v-uni-text",[t._v("工单号:"+t._s(t.deletefrom.WorkNo))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("客户:"+t._s(t.deletefrom.CustName))])],1),i("v-uni-view",[i("v-uni-text",[t._v("产品编号:"+t._s(t.deletefrom.ProdNo))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("规格:"+t._s(t.deletefrom.BoxInfo))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("名称:"+t._s(t.deletefrom.ProdName))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("料号:"+t._s(t.deletefrom.BatchNo))])],1),i("v-uni-view",[i("v-uni-text",[t._v("客户PO:"+t._s(t.deletefrom.CustPO))])],1)],1),i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("入库"+t._s(t.deletefrom.InStoreQty))])],1),i("v-uni-view",[i("v-uni-text",[t._v("库存:"+t._s(t.deletefrom.StoreQty))])],1),i("v-uni-view",[i("v-uni-text",[t._v("未送:"+t._s(t.deletefrom.NoDelQty))])],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"删除"==t.modalTitle?"show":"",expression:"modalTitle=='删除'?'show':''"}]},[i("v-uni-text",[t._v("送货:"+t._s(t.deletefrom.DelQty))])],1)],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"修改"==t.modalTitle?"show":"",expression:"modalTitle=='修改'?'show':''"}]},t._l(t.modifyfromdata,(function(e,a){return i("v-uni-view",{key:a,staticClass:"grid-body"},[i("v-uni-view",{staticClass:"grid-flex padding-10"},[i("v-uni-view",[i("v-uni-text",[t._v("仓位"+t._s(e.bssat_StationName))])],1),i("v-uni-view",[i("v-uni-text",[t._v("库存:"+t._s(e.bssat_Qty))])],1),i("v-uni-view",{staticClass:"updete"},[i("v-uni-text",[t._v("送货数:")]),i("v-uni-input",{staticStyle:{border:"1px solid red",width:"50%"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.checkDelQty(e,a)}},model:{value:e.bssat_DelQty,callback:function(i){t.$set(e,"bssat_DelQty",i)},expression:"item.bssat_DelQty"}})],1)],1)],1)})),1),i("v-uni-view",{staticClass:"cu-bar bg-white"},[i("v-uni-view",{staticClass:"action margin-0 flex-sub  solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),i("v-uni-view",{staticClass:"action margin-0 flex-sub text-green solid-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmFrom.apply(void 0,arguments)}}},[t._v("确定")])],1)],1)],1),i("v-uni-view",{staticStyle:{height:"70px"}}),i("v-uni-view",{staticClass:"chucangbtm"},[i("v-uni-view",{ref:"elBtn",staticClass:"flex solid-bottom padding justify-around elBtn"},[i("v-uni-view",[i("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetFrom.apply(void 0,arguments)}}},[t._v("清除全部")])],1),i("v-uni-view",{staticStyle:{"margin-top":"5px"}},[i("v-uni-text",[t._v("总记录数:"+t._s(t.numbertext))])],1),i("v-uni-view",[i("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paprtIn.apply(void 0,arguments)}}},[t._v("保存出仓")])],1)],1)],1)],2)},s=[]},"82d5":function(t,e,i){"use strict";function a(t){var e=new Date,i={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":e.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),i)new RegExp("("+a+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?i[a]:("00"+i[a]).substr((""+i[a]).length)));return fmt}i("4d63"),i("ac1f"),i("25f0"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},d95b:function(t,e,i){"use strict";var a=i("4ea4");i("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("ee99")),s={data:function(){return{}},methods:{getWarehouseDataProvider:function(t,e){var i=this;return new Promise((function(a,s){i.toast.loading(),o.default.post("/warehouse/warehouse/execute/".concat(t),e).then((function(t){i.toast.hide(),a(t)})).catch((function(t){i.toast.hide(),i.toast.message("执行失败"+t),s(t)}))}))}}};e.default=s},dbc4:function(t,e,i){"use strict";(function(t){var a=i("4ea4");i("c975"),i("a434"),i("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var o=a(i("b33b")),s=a(i("8fde")),n=a(i("c8d6")),r=a(i("ee99")),u=(a(i("82d5")),a(i("d95b"))),d={name:"boxIn",components:{zTable:s.default,uniPopup:o.default,cuCustom:n.default},mixins:[u.default],data:function(){return{modifyfromdata:[],numbertext:0,shouindex:[0,1,0],modalindex:null,modalName:null,fromdata:[],currentSelected:"-1",TabCur:0,scanType:"",scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:400,boxOut:{formItem:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:"",bi_OrderNo:"",bi_OrderQty:""},formItemText:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:""},formItemInit:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:"",bi_OrderNo:"",bi_OrderQty:""},car:{items:[],show:!1},follower:{items:[],show:!1},loader:{items:[],show:!1},sender:{items:[],show:!1},tableData:[]},deletefrom:{},modalTitle:""}},mounted:function(){this.getTemporaryData()},onShow:function(){this.getTemporaryData()},methods:{checkDelQty:function(t,e){var i=Number(t.detail.value),a=Number(this.modifyfromdata[e].bssat_Qty);i>a&&uni.showToast({title:"送货数不能大于库存数",duration:2e3,icon:"none",position:"bottom"})},getTemporaryData:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),i={Flag:2,UserID:e.erpUserCode};this.toast.loading(),r.default.post("/warehouse/warehouse/execute/appBoxDeliListAppTemp",i).then((function(e){t.toast.hide(),t.fromdata=e.list,t.numbertext=e.list.length})).catch((function(e){t.toast.hide(),t.toast.message("数据加载失败")}))},boxInGetOrderInfo:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(""!=this.boxOut.formItem.bi_OrderNo){this.fromdata=[],this.numbertext=0;var i={bcNo:this.boxOut.formItem.bi_OrderNo,Flag:1,UserID:e.erpUserCode};this.toast.loading(),r.default.post("/warehouse/warehouse/execute/appBoxScanOrder",i).then((function(e){if(e.list&&e.list.length>0)return t.fromdata=e.list,t.numbertext=e.list.length,void t.toast.hide();t.toast.hide(),t.toast.message("没有该订单对应的数据")})).catch((function(e){t.toast.hide(),t.errorContent="暂无数据",t.toast.message("获取数据失败:"+e)}))}else this.toast.message("请输入或扫描工单号")},paprtIn:function(){0!=this.fromdata.length||""!=this.boxOut.formItem.bi_OrderNo?uni.navigateTo({url:"outStorageEdit"}):this.toast.message("请输入工单号")},inKit:function(t){this.fromdata[t].bcNo,this.fromdata[t].ProdNo;uni.navigateTo({url:"./taojianmixi/taojianmixi?bcNo=".concat(this.fromdata[t].bcNo,"&ProdNo=")+this.fromdata[t].ProdNo})},resetFrom:function(){this.numbertext=0,this.fromdata=[],this.boxOut.formItem.bi_OrderNo="";var t=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),e={UserID:t.erpUserCode,Flag:5};this.boxOutGetBaseInfo(e).then((function(t){}))},confirmFrom:function(e){var i=this,a=this.modalindex,o=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if("删除"==this.modalTitle){var s={UserID:o.erpUserCode,Flag:4,OrderNo:this.fromdata[a].bcNo,WorkNo:this.fromdata[a].WorkNo};this.boxOutGetBaseInfo(s).then((function(e){t("log",e," at pages/warehouse/boxIn/chengpinchuku.vue:394"),e?(i.fromdata.splice(a,1),i.numbertext=i.fromdata.length,i.modalName=null):(i.modalName=null,i.toast.message("删除失败"))}))}else{this.toast.loading();var n=this.checkmodifyfromdataQty();if(!n)return this.toast.hide(),void this.toast.message("送货数不能大于库存数");this.fromdata[a].DelQty=this.deletefrom.DelQty,r.default.post("/scan/updateBoxAppTemp",this.modifyfromdata).then((function(e){t("log",e," at pages/warehouse/boxIn/chengpinchuku.vue:416"),e>0?(i.toast.hide(),i.toast.message("修改成功"),i.getTemporaryData()):(i.toast.hide(),i.toast.message("修改失败"))})).catch((function(t){i.toast.hide(),i.toast.message("网络请求超时")})),this.modalName=null}},checkmodifyfromdataQty:function(){for(var t=0;t<this.modifyfromdata.length;t++){var e=Number(this.modifyfromdata[t].bssat_DelQty),i=Number(this.modifyfromdata[t].bssat_Qty);if(e>i)return!1}return!0},hideModal:function(){this.modalName=null},deletebox:function(t){this.modalindex=t,this.modalTitle="删除",this.modalName="DialogModal2",this.deletefrom=JSON.parse(JSON.stringify(this.fromdata[t]))},updatebox:function(t){var e=this;this.modalindex=t,this.modalTitle="修改",this.modalName="DialogModal2",this.deletefrom=JSON.parse(JSON.stringify(this.fromdata[t]));var i=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a={Flag:2,UserID:i.erpUserCode,OrderNo:this.fromdata[t].bcNo,WorkNo:this.fromdata[t].WorkNo};this.toast.loading(),r.default.post("/warehouse/warehouse/execute/appBoxStoreStationAppTemp",a).then((function(t){e.toast.hide(),e.modifyfromdata=t.list})).catch((function(t){e.toast.hide(),e.modalName=null,e.toast.message("请求失败"),e.getTemporaryData()}))},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnToPageDataSelect:function(t,e){this.currentSelected=e,this.cache.put("setDataSelectedPageTitle",e),this.cache.put("setDataSelectedList",t),uni.navigateTo({url:"/components/list-select/list-select"})},boxInAspSaveBoxIn:function(){var t=this;if(""!=this.boxIn.formItem.bi_WorkNo)if(""!=this.boxIn.formItem.bi_Group)if(""!=this.boxIn.formItem.bi_InQty){var e={bi_WorkNo:this.boxIn.formItem.bi_WorkNo,bi_Group:this.boxIn.formItem.bi_Group,bi_InQty:this.boxIn.formItem.bi_InQty};this.toast.loading(),this.getWarehouseDataProvider("aspSaveBoxIn",e).then((function(e){if(e.list.length>0)return e.list[0].ErrorStr&&""!=e.list[0].ErrorStr?(t.toast.hide(),void t.toast.message(e.list[0].ErrorStr)):(t.toast.hide(),t.toast.message("入库成功"),void(t.boxIn.formItem=JSON.parse(JSON.stringify(t.boxIn.formItemInit))));t.toast.hide(),t.toast.message("入库失败")})).catch((function(e){t.toast.hide(),t.toast.message("入库失败"+e)}))}else this.toast.message("请输入数量");else this.toast.message("请输入班别");else this.toast.message("请输入或扫描工单号")},boxOutGetBaseInfo:function(t){return r.default.post("/warehouse/warehouse/execute/appBoxDeliListAppTemp",t)},turnOnScanCode:function(e){if(void 0===window){this.scanType=e;var i=this;this.fromdata=[],this.numbertext=0,uni.scanCode({scanType:"barCode",success:function(e){var a=e.result.indexOf(","),o=0;switch(t("log",a," at pages/warehouse/boxIn/chengpinchuku.vue:565"),o=a<0?e.result:e.result.substring(0,a),t("log","条码内容："+e.result," at pages/warehouse/boxIn/chengpinchuku.vue:571"),t("log","b："+o," at pages/warehouse/boxIn/chengpinchuku.vue:572"),i.TabCur){case 0:i.boxOut.formItem.bi_OrderNo=o,i.boxInGetOrderInfo();break;case 1:i.boxOut.formItem.bi_OrderNo=o,i.boxInGetOrderInfo();break;case 2:i.boxInc.formItem.bi_OrderNo=o,i.boxIncGetOrderInfo();break;default:break}}})}else this.toast.message('请在"e包装"公众号中下载APP后扫码!')}}};e.default=d}).call(this,i("0de9")["log"])},f120:function(t,e,i){var a=i("19a4");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var o=i("4f06").default;o("559adb98",a,!0,{sourceMap:!1,shadowMode:!1})},f76d:function(t,e,i){"use strict";i.r(e);var a=i("dbc4"),o=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,(function(){return a[t]}))}(s);e["default"]=o.a}}]);