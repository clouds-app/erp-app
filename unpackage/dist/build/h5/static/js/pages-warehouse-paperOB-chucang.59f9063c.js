(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-paperOB-chucang"],{2116:function(t,e,r){var a=r("6dec");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=r("4f06").default;s("0338e95c",a,!0,{sourceMap:!1,shadowMode:!1})},"28bf":function(t,e,r){"use strict";var a=r("2116"),s=r.n(a);s.a},"3c8e":function(t,e,r){"use strict";(function(t){var a=r("4ea4");r("d3b7"),r("ac1f"),r("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(r("8fde")),i=a(r("c8d6")),o=a(r("ee99")),n=a(r("82d5")),p={name:"paperOB",components:{zTable:s.default,cuCustom:i.default},data:function(){return{scanType:"orderNo",TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:500,paperStoreTableData:[],operStatus:"",paperOutBtnShow:!1,paperBackBtnShow:!1,paperOutFormItems:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"0",desc:""},paperBackFormItems:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"0",desc:""},paperOutFormInit:{instruct:"",line:"",group:"",outUser:"",inUser:"",coil:"",paperType:"暂ㅤ无",gram:"0",paperWidth:"暂ㅤ无",ewt:"",desc:""},paperStoreItem:{Vend:"",Type:"",Station:"",Width:"",Gram:"",Coil:""},paperStoreColumns:[{key:"ss_Station",title:"仓位",width:140},{key:"v_desc",title:"制造商",width:180},{key:"ss_SPaperType",title:"纸类",width:180},{key:"ss_Width",title:"纸宽",width:140},{key:"ss_Gram",title:"克重",width:140},{key:"ss_Ewt",title:"重量",width:140},{key:"ss_Coil",title:"卷号",width:220}]}},computed:{storeTableHeight:function(){return this.screen.height/2+25}},methods:{tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnOnScanCode:function(e){this.scanType=e;var r=this;uni.scanCode({scanType:"barCode",success:function(a){switch(t("log","条码内容："+a.result," at pages/warehouse/paperOB/chucang.vue:205"),r.TabCur){case 0:"orderNo"==e&&(r.paperOutFormItems.instruct=a.result,r.paperOutInstructBlur()),"rollNo"==e&&(r.paperOutFormItems.coil=a.result,r.getOutPaperInfo());break;case 1:"orderNo"==e&&(r.paperBackFormItems.instruct=a.result,r.paperOutInstructBlur()),"rollNo"==e&&(r.paperBackFormItems.coil=a.result,r.getBackPaperInfo());break;case 2:break;default:break}}})},getOutPaperInfo:function(){var t=this;""!=this.paperOutFormItems.coil&&(this.paperOutBtnShow=!1,this.getPaperInfo(this.paperOutFormItems.coil).then((function(e){if(e.length>0){var r=e[0];return t.paperOutFormItems.paperType=r.ss_SPaperType,t.paperOutFormItems.gram=r.ss_Gram,t.paperOutFormItems.paperWidth=r.ss_Width,t.paperOutFormItems.ewt=r.ss_Ewt,t.operStatus=r.LastState,t.paperOutBtnShow=!0,void("O"==r.LastState&&t.$nextTick((function(){t.$refs.ewt_input.focus})))}t.paperOutFormItems.coil=""})))},getBackPaperInfo:function(){var t=this;""!=this.paperBackFormItems.coil&&(this.paperBackBtnShow=!1,this.getPaperInfo(this.paperBackFormItems.coil).then((function(e){if(e.length>0){var r=e[0];return t.paperBackFormItems.paperType=r.ss_SPaperType,t.paperBackFormItems.gram=r.ss_Gram,t.paperBackFormItems.paperWidth=r.ss_Width,t.paperBackFormItems.ewt=r.ss_Ewt,t.paperBackBtnShow=!0,void t.$nextTick((function(){t.$refs.back_ewt.focus()}))}t.paperBackFormItems.coil=""})))},getPaperInfo:function(t){var e=this;if(""!=t){var r={Coil:t,Flag:0};return new Promise((function(t,a){o.default.post("/warehouse/warehouse/execute/spGetSPaperStoreForPDA",r).then((function(r){0==r.list.length&&e.toast.message("当前卷号不存在"),t(r.list)})).catch((function(t){e.errorContent="暂无数据","string"===typeof t?e.toast.message("获取数据失败"+t):e.toast.message("执行失败，请稍后再试")}))}))}},getInstruct:function(t){if(""!=t){var e=t.split("+");if(!(e.length<5)){var r={line:e[1],group:e[2],inUser:e[4],outUser:e[3]};return r}uni.showToast({title:"数据解析失败，参数个数不够",icon:"none",duration:2e3})}else"orderNo"===this.scanType?uni.showToast({title:"请输入或扫描指令",icon:"none",duration:2e3}):"rollNo"===this.scanType?uni.showToast({title:"请输入或扫描卷号",icon:"none",duration:2e3}):uni.showToast({title:"请输入必要信息",icon:"none",duration:2e3})},paperOutInstructBlur:function(){this.scanType="orderNo";var t=this.getInstruct(this.paperOutFormItems.instruct);t&&(Object.assign(this.paperOutFormItems,t),this.paperOutFormItems.instruct="")},paperBackInstructBlur:function(){var t=this.getInstruct(this.paperBackFormItems.instruct);t&&(Object.assign(this.paperBackFormItems,t),this.paperBackFormItems.instruct="")},paperOBRequest:function(t,e){var r=this;return new Promise((function(a,s){r.toast.loading(),o.default.post(t).then((function(t){if(r.toast.hide(),t.list.length>0)return t.list[0].ErrorStr&&""!=t.list[0].ErrorStr?void r.toast.message(t.list[0].ErrorStr):(r.toast.message(e+"成功"),void a(t));r.toast.message(e+"失败")})).catch((function(t){r.toast.hide(),r.errorContent="暂无数据",r.toast.message("获取数据失败:"+t),s()}))}))},paperOut:function(){var t=this;if(""!=this.paperOutFormItems.coil){var e={Line:this.paperOutFormItems.line,Group:this.paperOutFormItems.group,Oper:"admin",Flag:"out",Coil:this.paperOutFormItems.coil,OutUseID:this.paperOutFormItems.outUser,InUseID:this.paperOutFormItems.inUser,Wt:this.paperOutFormItems.ewt,OperDate:(0,n.default)("yyyy-MM-dd hh:mm:ss")};this.paperOBRequest(e,"出仓").then((function(e){t.paperOutFormItems=JSON.parse(JSON.stringify(t.paperOutFormInit)),t.paperOutBtnShow=!1}))}else this.toast.message("请输入或扫描卷号")},paperBack:function(){var t=this;if(""!=this.paperBackFormItems.coil){var e={Line:this.paperBackFormItems.line,Group:this.paperBackFormItems.group,Oper:"admin",Flag:"back",Coil:this.paperBackFormItems.coil,OutUseID:this.paperBackFormItems.outUser,InUseID:this.paperBackFormItems.inUser,Wt:this.paperBackFormItems.ewt,OperDate_IN_date:(0,n.default)("yyyy-MM-dd hh:mm:ss"),ErrorStr_OUT_varchar:""};this.paperOBRequest(e,"退仓").then((function(e){t.paperBackFormItems=JSON.parse(JSON.stringify(t.paperOutFormInit)),t.paperBackBtnShow=!1}))}else this.toast.message("请输入或扫描卷号")},paperStoreSearch:function(){var t=this;""!=this.paperStoreItem.Type?(this.errorContent="数据加载中...",this.toast.loading(),o.default.post("/warehouse/warehouse/execute/spSPaperStoreQueryForPDA",this.paperStoreItem).then((function(e){t.toast.hide(),e=e.list,t.paperStoreTableData=e,t.errorContent="暂无数据"})).catch((function(e){t.toast.hide(),t.errorContent="暂无数据",t.toast.message("获取数据失败:"+e)}))):this.toast.message("请输入纸类")}}};e.default=p}).call(this,r("0de9")["log"])},4899:function(t,e,r){"use strict";r.r(e);var a=r("3c8e"),s=r.n(a);for(var i in a)"default"!==i&&function(t){r.d(e,t,(function(){return a[t]}))}(i);e["default"]=s.a},"4b42":function(t,e,r){"use strict";var a;r.d(e,"b",(function(){return s})),r.d(e,"c",(function(){return i})),r.d(e,"a",(function(){return a}));var s=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-uni-view",[r("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[r("template",{attrs:{slot:"content"},slot:"content"},[t._v("原纸出仓")])],2),r("v-uni-view",{staticClass:"cu-form-group border-top"},[r("v-uni-view",{staticClass:"title"},[t._v("指ㅤ令:")]),r("v-uni-input",{attrs:{placeholder:"请输入或扫描指令:0+0+0+0+0",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.paperBackInstructBlur.apply(void 0,arguments)}},model:{value:t.paperBackFormItems.instruct,callback:function(e){t.$set(t.paperBackFormItems,"instruct",e)},expression:"paperBackFormItems.instruct"}}),r("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("orderNo")}}},[t._v("扫描")])],1),r("v-uni-view",{staticClass:"flex border-top"},[r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("线ㅤ别:")]),r("v-uni-input",{attrs:{placeholder:"请输入线别",name:"input"},model:{value:t.paperBackFormItems.line,callback:function(e){t.$set(t.paperBackFormItems,"line",e)},expression:"paperBackFormItems.line"}})],1)],1),r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("班ㅤ别:")]),r("v-uni-input",{attrs:{placeholder:"请输入班别",name:"input"},model:{value:t.paperBackFormItems.group,callback:function(e){t.$set(t.paperBackFormItems,"group",e)},expression:"paperBackFormItems.group"}})],1)],1)],1),r("v-uni-view",{staticClass:"flex border-top"},[r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("发ㅤ料:")]),r("v-uni-input",{attrs:{placeholder:"请输入发料",name:"input"},model:{value:t.paperBackFormItems.outUser,callback:function(e){t.$set(t.paperBackFormItems,"outUser",e)},expression:"paperBackFormItems.outUser"}})],1)],1),r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("领ㅤ料:")]),r("v-uni-input",{attrs:{placeholder:"请输入领料",name:"input"},model:{value:t.paperBackFormItems.inUser,callback:function(e){t.$set(t.paperBackFormItems,"inUser",e)},expression:"paperBackFormItems.inUser"}})],1)],1)],1),r("v-uni-view",{staticClass:"cu-form-group border-top"},[r("v-uni-view",{staticClass:"title"},[t._v("卷ㅤ号:")]),r("v-uni-input",{attrs:{placeholder:"请输入或扫描卷号:0+0+0+0+0",name:"input"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.getBackPaperInfo()}},model:{value:t.paperBackFormItems.coil,callback:function(e){t.$set(t.paperBackFormItems,"coil",e)},expression:"paperBackFormItems.coil"}}),r("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("rollNo")}}},[t._v("扫描")])],1),r("v-uni-view",{staticClass:"flex border-top"},[r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("纸ㅤ类:")]),r("v-uni-input",{attrs:{disabled:!0,placeholder:"请输入纸类",name:"input"},model:{value:t.paperBackFormItems.paperType,callback:function(e){t.$set(t.paperBackFormItems,"paperType",e)},expression:"paperBackFormItems.paperType"}})],1)],1),r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("克ㅤ重:")]),r("v-uni-input",{attrs:{disabled:!0,placeholder:"请输入克重",name:"input"},model:{value:t.paperBackFormItems.gram,callback:function(e){t.$set(t.paperBackFormItems,"gram",e)},expression:"paperBackFormItems.gram"}})],1)],1)],1),r("v-uni-view",{staticClass:"flex border-top"},[r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("纸ㅤ度:")]),r("v-uni-input",{attrs:{disabled:!0,placeholder:"请输入纸度",name:"input"},model:{value:t.paperBackFormItems.paperWidth,callback:function(e){t.$set(t.paperBackFormItems,"paperWidth",e)},expression:"paperBackFormItems.paperWidth"}})],1)],1),r("v-uni-view",{staticClass:"flex-sub"},[r("v-uni-view",{staticClass:"cu-form-group"},[r("v-uni-view",{staticClass:"title"},[t._v("重ㅤ重:")]),r("v-uni-input",{ref:"back_ewt",attrs:{disabled:!0,placeholder:"请输入重重",name:"input"},model:{value:t.paperBackFormItems.ewt,callback:function(e){t.$set(t.paperBackFormItems,"ewt",e)},expression:"paperBackFormItems.ewt"}})],1)],1)],1),r("v-uni-view",{staticClass:"cu-form-group border-top"},[r("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入备注"},model:{value:t.paperBackFormItems.desc,callback:function(e){t.$set(t.paperBackFormItems,"desc",e)},expression:"paperBackFormItems.desc"}})],1),r("v-uni-view",{staticClass:"margin-text-center"},[r("v-uni-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paperBack()}}},[t._v("出ㅤ仓")])],1)],1)},i=[]},"6dec":function(t,e,r){var a=r("24fb");e=a(!1),e.push([t.i,".margin-text-center[data-v-86e3a5ce]{text-align:center;margin:%?20?%}.border-top[data-v-86e3a5ce]{border-top:1px solid #eee}.cu-form-group .title[data-v-86e3a5ce]{min-width:calc(4em + 15px)}",""]),t.exports=e},"82d5":function(t,e,r){"use strict";function a(t){var e=new Date,r={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":e.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var a in/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),r)new RegExp("("+a+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?r[a]:("00"+r[a]).substr((""+r[a]).length)));return fmt}r("4d63"),r("ac1f"),r("25f0"),r("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=a},"88c0":function(t,e,r){"use strict";r.r(e);var a=r("4b42"),s=r("4899");for(var i in s)"default"!==i&&function(t){r.d(e,t,(function(){return s[t]}))}(i);r("28bf");var o,n=r("f0c5"),p=Object(n["a"])(s["default"],a["b"],a["c"],!1,null,"86e3a5ce",null,!1,a["a"],o);e["default"]=p.exports}}]);