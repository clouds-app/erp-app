(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-paperIn-chucangsaomiao"],{"01ba":function(t,e,a){var i=a("4a22");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("093369c3",i,!0,{sourceMap:!1,shadowMode:!1})},"4a22":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".margin-text-center[data-v-e3205336]{text-align:center;margin:%?20?%}.border-top[data-v-e3205336]{border-top:1px solid #eee}.cu-form-group .title[data-v-e3205336]{min-width:calc(4em + 15px)}.updete[data-v-e3205336]{\r\n\t/* width: 50%; */display:-webkit-box;display:-webkit-flex;display:flex;margin:auto 20px 10px;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.padding-xl[data-v-e3205336]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.chucangbtm[data-v-e3205336]{position:fixed;bottom:0;width:100%;background-color:#fff;z-index:100}.xunhoutop[data-v-e3205336]{position:fixed;width:100%;z-index:500}",""]),t.exports=e},"73c9":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸板出仓扫描")])],2),a("v-uni-form",{staticClass:"xunhoutop"},[a("v-uni-view",{ref:"elForm",staticClass:"bodyContentHeight2 elForm"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("订单号:")]),a("v-uni-input",{attrs:{placeholder:"请输入订单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.paperOut()}},model:{value:t.paperOutItem.fOrderNo,callback:function(e){t.$set(t.paperOutItem,"fOrderNo",e)},expression:"paperOutItem.fOrderNo"}}),a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("out")}}},[t._v("扫描")])],1)],1)],1),a("v-uni-view",{staticStyle:{height:"40px"}}),a("v-uni-view",{staticClass:"example"},[a("v-table",{attrs:{"row-class-name":t.rowClassNameFn,columns:t.findGoodsColumns,list:t.paperOutTableDataItems,selection:"single","td-width":200},on:{"on-selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticStyle:{height:"50px"}}),a("v-uni-view",{staticClass:"chucangbtm"},[a("v-uni-view",{ref:"elBtn",staticClass:"flex solid-bottom padding justify-around elBtn"},[a("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetFrom.apply(void 0,arguments)}}},[t._v("清除")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{"data-target":"DialogModal1",type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deletelist.apply(void 0,arguments)}}},[t._v("删除")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{"data-target":"DialogModal1",type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updetelist.apply(void 0,arguments)}}},[t._v("修改")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paprtIn.apply(void 0,arguments)}}},[t._v("保存")])],1)],1),a("v-uni-view",{staticClass:"cu-modal",class:"DialogModal1"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v(t._s(t.edittitle))]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"grid-body"},[a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",{staticStyle:{color:"red"}},[a("v-uni-text",[t._v("工单号:"+t._s(t.findGoodsTableDataItems.OrderNo))])],1)],1),a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",[a("v-uni-text",[t._v("工单信息:"+t._s(t.findGoodsTableDataItems.w_Name)+","+t._s(t.findGoodsTableDataItems.PaperInfo))])],1)],1),a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",[a("v-uni-text",[t._v("库存:"+t._s(t.findGoodsTableDataItems.Store))])],1),a("v-uni-view",[a("v-uni-text",[t._v("未送数:"+t._s(t.findGoodsTableDataItems.NoDueQty))])],1),a("v-uni-view",[a("v-uni-text",[t._v("装车数:"+t._s(t.findGoodsTableDataItems.CLQty))])],1)],1)],1),"修改"==t.edittitle?a("v-uni-view",{staticClass:"updete",staticStyle:{"font-size":"20px"}},[a("v-uni-view",{staticClass:"title"},[t._v("装车数:")]),a("v-uni-input",{staticStyle:{border:"1px solid red",width:"30%"},attrs:{type:"number"},model:{value:t.CLQty,callback:function(e){t.CLQty=e},expression:"CLQty"}})],1):t._e(),a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn line-green text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-button",{staticClass:"cu-btn bg-green margin-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal("ok")}}},[t._v("确定")])],1)],1)],1)],1)],1)},s=[]},"97cc":function(t,e,a){"use strict";a.r(e);var i=a("d6e7"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},ba20:function(t,e,a){"use strict";var i=a("01ba"),n=a.n(i);n.a},d6e7:function(t,e,a){"use strict";(function(t){var i=a("4ea4");a("c975"),a("a434"),a("a9e3"),a("d3b7"),a("ac1f"),a("1276"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("cebd")),r=i(a("07ee")),o=i(a("b073")),l=i(a("ba48")),u=i(a("8fde")),c=i(a("c8d6")),d=i(a("ee99")),p=i(a("e4fc")),h={name:"paperIn",components:{vTable:p.default,zTable:u.default,cuCustom:c.default,tTable:s.default,tTh:r.default,tTr:o.default,tTd:l.default},data:function(){return{CLQty:"",edittitle:"",otherHeight:0,leftContentHeight:0,index:null,modalName:"",TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:0,findGoodsTableDataItems:[],paperOutTableDataItems:[],paperInFormItems:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},paperInFormInit:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},findGoodsItem:{fOrderNo:""},paperOutItem:{fOrderNo:"",batch:""},findGoodsColumns:[{key:"Serial",title:"序号",$width:80},{key:"CustName",title:"客户",$width:180,titleAlign:"center",columnAlign:"center"},{key:"OrderNo",title:"订单号",$width:200},{key:"Store",title:"库存数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"NoDueQty",title:"未送数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"CLQty",title:"装车数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"PaperInfo",title:"纸板信息",$width:220,titleAlign:"center",columnAlign:"center"},{key:"MinSize",title:"小尺寸",$width:200,titleAlign:"center",columnAlign:"center"},{key:"AreaName",title:"地区",$width:130,titleAlign:"center",columnAlign:"center"}]}},mounted:function(){this.getTableHeight(),this.getTemporaryData()},onShow:function(){this.getTemporaryData()},methods:{rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},getTemporaryData:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a={UserID:e.erpUserCode,Flag:2};d.default.post("/warehouse/warehouse/execute/appPaperCarListAppTemp",a).then((function(e){t.paperOutTableDataItems=e.list;for(var a=0;a<t.paperOutTableDataItems.length;a++)t.paperOutTableDataItems[a].Serial=a+1}))},getOtherContentHeight:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(a,i){var n=t,s=uni.createSelectorQuery().in(n).select("."+e);s.boundingClientRect((function(t){n.otherHeight=t.height,t.height,a(t.height)})).exec((function(t){}))}))},setTableHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.otherHeight=0);try{var e=uni.getSystemInfoSync();return this.leftContentHeight=e.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(a){}},getTableHeight:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,i=a.setTableHeight(),e.next=4,a.getOtherContentHeight("elForm");case 4:return n=e.sent,e.next=7,a.getOtherContentHeight("elBtn");case 7:s=e.sent,null!=n&&null!=s&&(a.tableHeight=i-n-s-20);case 9:case"end":return e.stop()}}),e)})))()},operationFromrequst:function(t){return d.default.post("/warehouse/warehouse/execute/appPaperCarListAppTemp",t)},resetFrom:function(){var t=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(0!=this.paperOutTableDataItems.length){this.paperOutTableDataItems=[],this.paperOutItem.fOrderNo="";var e={UserID:t.erpUserCode,Flag:5};this.operationFromrequst(e)}else this.toast.message("请输入工单号")},updetelist:function(t){0!=this.paperOutTableDataItems.length?null!=this.index?(this.edittitle="修改",this.modalName=t.currentTarget.dataset.target):this.toast.message("请选择操作数据"):this.toast.message("请输入工单号")},hideModal:function(t){var e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a=this.index,i={Flag:3,UserID:e.erpUserCode,CLQty:Number(this.CLQty),OrderNo:this.paperOutTableDataItems[a].OrderNo};if("ok"==t)if("修改"==this.edittitle)this.paperOutTableDataItems[a].CLQty=JSON.parse(JSON.stringify(this.CLQty)),this.operationFromrequst(i),this.modalName=null,this.CLQty="",this.onClick();else{var n={Flag:4,OrderNo:this.paperOutTableDataItems[a].OrderNo,UserID:e.erpUserCode,CLQty:""};this.operationFromrequst(n),this.paperOutTableDataItems.splice(a,1);for(var s=0;s<this.paperOutTableDataItems.length;s++)this.paperOutTableDataItems[s].Serial=s+1;this.modalName=null}else this.modalName=null},deletelist:function(t){this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(0!=this.paperOutTableDataItems.length)if(null!=this.index){this.index;this.edittitle="删除",this.modalName=t.currentTarget.dataset.target}else this.toast.message("请选择操作数据");else this.toast.message("请输入工单号")},onClick:function(t){void 0!=t?(this.findGoodsTableDataItems=JSON.parse(JSON.stringify(t.new.item)),this.index=t.new.index):this.findGoodsTableDataItems=this.paperOutTableDataItems[this.index]},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnOnScanCode:function(e){if(void 0===window){var a=this;uni.scanCode({scanType:"barCode",success:function(i){var n=i.result.indexOf(","),s=0;switch(t("log",n," at pages/warehouse/paperIn/chucangsaomiao.vue:417"),s=n<0?i.result:i.result.substring(0,n),t("log","条码内容："+i.result," at pages/warehouse/paperIn/chucangsaomiao.vue:423"),e){case"in":a.paperInFormItems.instruct=s,a.getParamsFromScanCode();break;case"out":a.paperOutItem.fOrderNo=s,a.paperOut();break;case"search":this.findGoodsItem.fOrderNo=s;break;default:break}}})}else this.toast.message('请在"e包装"公众号中下载APP后扫码!')},barCodeBlur:function(){""!=this.paperInFormItems.instruct?this.getParamsFromScanCode():this.toast.message("请输入或扫描条码")},getParamsFromScanCode:function(){var t=this.paperInFormItems.instruct.split("*");if(t.length<5)this.toast.message("数据解析失败，参数个数不够");else{var e={fOrderNo:t[0],fDNum:t[1],fQty:t[2],line:t[3],group:t[4]};Object.assign(this.paperInFormItems,e)}},paperInRequest:function(t){return d.default.post("/warehouse/warehouse/execute/appSpScanOrder",t)},paprtIn:function(){var t=this;if(0!=this.paperOutTableDataItems.length){var e=this.paperOutItem.fOrderNo;uni.navigateTo({url:"outStorageEdit?fOrderNo="+encodeURIComponent(e),success:function(e){t.paperOutTableDataItems=[]}})}else this.toast.message("请输入工单号")},findGoods:function(){var t=this;if(""!=this.findGoodsItem.fOrderNo){var e={FOrderNo:this.findGoodsItem.fOrderNo,BarCodeStr:this.findGoodsItem.fOrderNo,Flag:2};this.paperInRequest(e).then((function(t){})).catch((function(e){t.toast.message("暂无数据")}))}else this.toast.message("请输入或扫描工单号")},paperOut:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(""==this.paperOutItem.fOrderNo)return this.toast.message("请输入或扫描订单号"),void(this.paperOutItem.fOrderNo="");for(var a=0;a<this.paperOutTableDataItems.length;a++){var i=this.paperOutItem.fOrderNo;if(i==this.paperOutTableDataItems[a].OrderNo)return this.toast.message("该订单号已扫描"),void(this.paperOutItem.fOrderNo="")}var n={BarCodeStr:this.paperOutItem.fOrderNo,Station:"",Flag:2,UserID:e.erpUserCode};this.toast.loading(),this.paperInRequest(n).then((function(e){t.toast.hide(),e.list&&e.list.length>0?(t.paperOutTableDataItems.push(JSON.parse(JSON.stringify(e.list[0]))),t.paperOutItem.fOrderNo=""):(t.toast.message("该订单号暂无数据"),t.paperOutItem.fOrderNo="");for(var a=0;a<t.paperOutTableDataItems.length;a++)t.paperOutTableDataItems[a].Serial=a+1})).catch((function(e){t.toast.hide(),t.toast.message("暂无数据"),t.paperOutItem.fOrderNo=""}))}}};e.default=h}).call(this,a("0de9")["log"])},d8ce:function(t,e,a){"use strict";a.r(e);var i=a("73c9"),n=a("97cc");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ba20");var r,o=a("f0c5"),l=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"e3205336",null,!1,i["a"],r);e["default"]=l.exports}}]);