(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-boxIn-outStorageEdit"],{2422:function(t,e,i){"use strict";var n=i("9e6b"),a=i.n(n);a.a},"4d3d":function(t,e,i){"use strict";i.d(e,"b",(function(){return a})),i.d(e,"c",(function(){return r})),i.d(e,"a",(function(){return n}));var n={searchForm:i("cbc5").default},a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[i("template",{attrs:{slot:"content"},slot:"content"},[t._v("保存出仓")])],2),i("v-uni-form",[i("v-uni-view",{ref:"elForm",staticClass:"elForm"},[i("v-uni-view",{staticClass:"cu-form-group border-top"},[i("v-uni-view",{staticClass:"title"},[t._v("车牌:")]),i("v-uni-input",{attrs:{disabled:!0,placeholder:"请选择车牌",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("LicensePlate")}},model:{value:t.formItem.LicensePlate,callback:function(e){t.$set(t.formItem,"LicensePlate",e)},expression:"formItem.LicensePlate"}}),i("v-uni-text",{staticClass:"cuIcon-rounddown text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("LicensePlate")}}})],1),i("v-uni-view",{staticClass:"cu-form-group border-top"},[i("v-uni-view",{staticClass:"title"},[t._v("司机:")]),i("v-uni-input",{attrs:{disabled:!0,placeholder:"请选择司机",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("driver")}},model:{value:t.formItem.driver,callback:function(e){t.$set(t.formItem,"driver",e)},expression:"formItem.driver"}}),i("v-uni-text",{staticClass:"cuIcon-rounddown text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("driver")}}})],1),i("v-uni-view",{staticClass:"cu-form-group border-top"},[i("v-uni-view",{staticClass:"title"},[t._v("装车:")]),i("v-uni-input",{attrs:{disabled:!0,placeholder:"请选择装车",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("entrucking")}},model:{value:t.formItem.entrucking,callback:function(e){t.$set(t.formItem,"entrucking",e)},expression:"formItem.entrucking"}}),i("v-uni-text",{staticClass:"cuIcon-rounddown text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("entrucking")}}})],1),i("v-uni-view",{staticClass:"cu-form-group border-top"},[i("v-uni-view",{staticClass:"title"},[t._v("发货:")]),i("v-uni-input",{attrs:{disabled:!0,placeholder:"请选择发货",name:"input"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("sendGoods")}},model:{value:t.formItem.sendGoods,callback:function(e){t.$set(t.formItem,"sendGoods",e)},expression:"formItem.sendGoods"}}),i("v-uni-text",{staticClass:"cuIcon-rounddown text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.setSearchDataListSource("sendGoods")}}})],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("自提")]),i("v-uni-switch",{class:t.formItem.isSelfTake?"checked":"",attrs:{checked:!!t.formItem.isSelfTake},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.isSelfTakeChange.apply(void 0,arguments)}}})],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("送货日期")]),i("v-uni-picker",{attrs:{mode:"date",value:t.formItem.deliverDate,start:"2015-09-01",end:"2020-09-01"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.DateChange.apply(void 0,arguments)}}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.formItem.deliverDate))])],1)],1)],1)],1),i("v-uni-view",{style:[{height:t.tableHeight+"px"}]}),i("v-uni-view",{ref:"elBtn",staticClass:"elBtn margin-text-center"},[i("v-uni-view",{staticClass:"text-red"},[i("v-uni-text",[t._v("保存出仓自动生成送货单，\n\t\t\t\t\t 不能再进行修改，\n\t\t\t\t\t 如需修改明细请于ERP送货单中进行修改"),i("p",{staticStyle:{"margin-top":"20rpx"}})])],1),i("v-uni-view",{staticClass:"flex  p-xs "},[i("v-uni-view",{staticClass:"flex-twice  radius"}),i("v-uni-view",{staticClass:"flex-sub radius"}),i("v-uni-view",{staticClass:"flex-twice  radius"},[i("v-uni-button",{staticClass:"cu-btn block bg-green  lg",attrs:{loading:!1,disabled:!t.canSubmit||""==t.formItem.LicensePlate||""==t.formItem.entrucking||""==t.formItem.driver||""==t.formItem.sendGoods,type:""},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.aspCarListAppAppend()}}},[t._v("保存出仓")])],1)],1)],1),i("searchForm",{ref:"searchForm",attrs:{dataSource:t.dataSource},on:{getSelectDataInfo:function(e){arguments[0]=e=t.$handleEvent(e),t.getSelectDataInfo.apply(void 0,arguments)}}})],1)},r=[]},"58be":function(t,e,i){"use strict";(function(t){var n=i("4ea4");i("13d5"),i("a9e3"),i("d3b7"),i("ac1f"),i("25f0"),i("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n(i("50ce")),r=(n(i("c9dc")),n(i("ee99"))),s={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:20,total:100},isLoaddingData:!1,otherHeight:0,leftContentHeight:0,avgWidth:90}},computed:{CustomBarHeight:function(){return this.CustomBar},userInfo:function(){var t=a.default.get(this.appConst.CLIENT_USER_CACHE_NAME);return t}},methods:{checkScan:function(){return void 0!==window},addThousandthSign:function(t){if(t){var e=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return t.toString().replace(e,"$1,")}return"0.00"},rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},onChangeInToCache:function(t,e){e&&e.tokenKey&&a.default.put(String(e.tokenKey),t)},getTableAvgWidth:function(t){var e=0;this.avgWidth=90;var i=0;return t&&t.length>0&&(e=t.length,i=t.reduce((function(t,e){return t+=Number(e.$width?e.$width:0),t}),0)),i>0&&e>0&&(this.avgWidth=~~(i/e)),this.avgWidth},getOrPostDataBy:function(t,e){var i=this;return this.isLoaddingData=!0,this.toast.loading(),new Promise((function(n,a){try{r.default.post(t,e).then((function(t){i.toast.hide(),n(t),i.isLoaddingData=!1})).catch((function(t){i.toast.hide(),a(t),"string"===typeof t?i.toast.message(t):i.toast.message("系统繁忙，请稍后再试!"),i.isLoaddingData=!1}))}catch(s){i.toast.hide(),i.isLoaddingData=!1}}))},getOtherContentHeight:function(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(n,a){var r=e,s=uni.createSelectorQuery().select("."+i);s.boundingClientRect((function(e){t("log","other Height:"+e.height," at mixins/index.js:118"),r.otherHeight=e.height,e.height,n(e.height)})).exec((function(t){}))}))},setTableHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.otherHeight=0);try{var i=uni.getSystemInfoSync();return t("log","CustomBar:"+this.CustomBar," at mixins/index.js:134"),this.leftContentHeight=i.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(n){}}}};e.default=s}).call(this,i("0de9")["log"])},"7f25":function(t,e,i){"use strict";var n=i("4ea4");i("d81d"),i("d3b7"),i("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,i("96cf");var a=n(i("1da1")),r=n(i("8fde")),s=n(i("c8d6")),o=n(i("ee99")),c=n(i("0526")),u=n(i("a44c")),l=n(i("a29c")),d=(n(i("58be")),{entrucking:"",entruckingID:"",sendGoods:"",SenderID:"",deliverDate:(0,u.default)(Date.now()).format("YYYY-MM-DD"),isSelfTake:!1,LicensePlate:"",driver:"",driverID:""}),h={components:{request:o.default,cuCustom:s.default,zTable:r.default,uniIcon:c.default,searchForm:l.default},data:function(){return{otherHeight:0,canSubmit:!0,currentAction:"",fOrderNo:"",toShowModal:!1,msgContent:"",dataSource:[],currentSelect:"driver",tableHeight:100,licensePlateList:[],driverList:[],entruckingList:[],sendGoodsList:[],formItem:Object.assign({},d)}},onLoad:function(t){this.fOrderNo=t.fOrderNo},mounted:function(){this.getTableHeight(),this.loadLicensePlateList(),this.loadDriverList(),this.loadEntruckingList(),this.loadsendGoodsList()},methods:{getOtherContentHeight:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(i,n){var a=t,r=uni.createSelectorQuery().in(a).select("."+e);r.boundingClientRect((function(t){a.otherHeight=t.height,t.height,i(t.height)})).exec((function(t){}))}))},setTableHeight:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];t||(this.otherHeight=0);try{var e=uni.getSystemInfoSync();return this.leftContentHeight=e.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(i){}},getTableHeight:function(){var t=this;return(0,a.default)(regeneratorRuntime.mark((function e(){var i,n,a,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return i=t,n=i.setTableHeight(),e.next=4,i.getOtherContentHeight("elForm");case 4:return a=e.sent,e.next=7,i.getOtherContentHeight("elBtn");case 7:r=e.sent,null!=a&&null!=r&&(i.tableHeight=n-a-r-20);case 9:case"end":return e.stop()}}),e)})))()},aspCarListAppAppend:function(t){var e=this;this.canSubmit=!1;var i=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),n={UserID:i.erpUserCode,CarNo:this.formItem.LicensePlate,Chauffeur:this.formItem.driver,Loador:this.formItem.entrucking,SenderID:this.formItem.sendGoods,IsZT:this.formItem.isSelfTake,ADate:this.formItem.deliverDate};o.default.post("/warehouse/warehouse/execute/appBoxDeliListSave",n).then((function(t){if(t&&t.list&&t.list.length>0){if(1===t.list[0].Error)return uni.showToast({title:"保存出仓失败:"+t.list[0].Result,icon:"none",duration:2e3}),void(e.canSubmit=!0);e.canSubmit=!1,uni.showModal({title:"提示",content:"保存出仓成功",showCancel:!1,success:function(t){t.confirm&&uni.navigateTo({url:"./chengpinchuku"})}})}}))},DateChange:function(t){this.formItem.deliverDate=t.detail.value},formatMultipleVal:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"desc",i="";t.map((function(t){""==i?i="desc"==e?t.ct_Desc:t.type:i+="desc"==e?";"+t.ct_Desc:";"+t.type}));return i},getSelectDataInfo:function(t){switch(this.currentSelect){case"LicensePlate":this.formItem.LicensePlate=t.ct_Desc;break;case"driver":this.formItem.driverID=t.type,this.formItem.driver=t.ct_Desc;break;case"entrucking":this.formItem.entruckingID=this.formatMultipleVal(t,"type"),this.formItem.entrucking=this.formatMultipleVal(t,"desc");break;case"sendGoods":this.formItem.SenderID=t.type,this.formItem.sendGoods=t.ct_Desc;default:break}},setSearchDataListSource:function(t){this.currentSelect=t,this.$refs["searchForm"].isMultipel=!1,this.$refs["searchForm"].isShowSearchList=!0,"LicensePlate"===t?(this.dataSource=this.licensePlateList,this.$refs["searchForm"].dataSourceList=this.licensePlateList):"driver"===t?(this.dataSource=this.driverList,this.$refs["searchForm"].dataSourceList=this.driverList):"entrucking"===t?(this.$refs["searchForm"].isMultipel=!0,this.dataSource=this.entruckingList,this.$refs["searchForm"].dataSourceList=this.entruckingList):"sendGoods"===t&&(this.dataSource=this.sendGoodsList,this.$refs["searchForm"].dataSourceList=this.sendGoodsList)},loadLicensePlateList:function(){var t=this;this.licensePlateList=[];var e={};o.default.post("/warehouse/warehouse/execute/appFindCar",e).then((function(e){if(e){var i=e.list.map((function(t){var e={type:t.text,ct_Desc:t.value};return e}));t.licensePlateList=i}}))},loadDriverList:function(){var t=this;this.driverList=[];var e={workType:"4,18"};o.default.post("/proc/execute/appFindUser",e).then((function(e){if(e){var i=e.list.map((function(t){var e={type:t.ID,ct_Desc:t.text};return e}));t.driverList=i}})).catch((function(t){uni.showToast({title:"加载司机列表失败:"+t,icon:"none",duration:2e3})}))},loadEntruckingList:function(){var t=this;this.entruckingList=[];var e={workType:"6,18"};o.default.post("/proc/execute/appFindUser",e).then((function(e){if(e){var i=e.list.map((function(t){var e={type:t.value,ct_Desc:t.text};return e}));t.entruckingList=i}})).catch((function(t){uni.showToast({title:"加载装货列表失败:"+t,icon:"none",duration:2e3})}))},loadsendGoodsList:function(){var t=this;this.sendGoodsList=[];var e={workType:"2,18"};o.default.post("/proc/execute/appFindUser",e).then((function(e){if(e){var i=e.list.map((function(t){var e={type:t.value,ct_Desc:t.text};return e}));t.sendGoodsList=i}})).catch((function(t){uni.showToast({title:"加载发货列表失败:"+t,icon:"none",duration:2e3})}))},isSelfTakeChange:function(t){this.formItem.isSelfTake=t.detail.value}}};e.default=h},9655:function(t,e,i){"use strict";i.r(e);var n=i("4d3d"),a=i("af67");for(var r in a)"default"!==r&&function(t){i.d(e,t,(function(){return a[t]}))}(r);i("2422");var s,o=i("f0c5"),c=Object(o["a"])(a["default"],n["b"],n["c"],!1,null,"a9d453ac",null,!1,n["a"],s);e["default"]=c.exports},"9e6b":function(t,e,i){var n=i("ea4d");"string"===typeof n&&(n=[[t.i,n,""]]),n.locals&&(t.exports=n.locals);var a=i("4f06").default;a("e7cd15e2",n,!0,{sourceMap:!1,shadowMode:!1})},af67:function(t,e,i){"use strict";i.r(e);var n=i("7f25"),a=i.n(n);for(var r in n)"default"!==r&&function(t){i.d(e,t,(function(){return n[t]}))}(r);e["default"]=a.a},c9dc:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n={title:"webApp",isRunApp:!1,cookieExpires:1,baseUrl:{dev:"http://192.168.0.218:8080",pro:"http://192.168.0.218:8080"},baseImgUrl:"http://192.168.0.218:8080/clerp-app-api",homeName:"home",plugin:{}};e.default=n},ea4d:function(t,e,i){var n=i("24fb");e=n(!1),e.push([t.i,".margin-text-center[data-v-a9d453ac]{text-align:center;margin:%?20?%}.border-top[data-v-a9d453ac]{border-top:1px solid #eee}.cu-form-group .title[data-v-a9d453ac]{min-width:calc(4em + 15px)}",""]),t.exports=e}}]);