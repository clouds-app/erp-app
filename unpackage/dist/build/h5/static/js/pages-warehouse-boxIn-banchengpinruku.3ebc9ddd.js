(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-boxIn-banchengpinruku"],{"06c5":function(t,e,o){"use strict";o("a630"),o("fb6a"),o("d3b7"),o("25f0"),o("3ca3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=i(o("6b75"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(t){if("string"===typeof t)return(0,r.default)(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?(0,r.default)(t,e):void 0}}},"0d10":function(t,e,o){"use strict";o.r(e);var r=o("f96e"),i=o.n(r);for(var s in r)"default"!==s&&function(t){o.d(e,t,(function(){return r[t]}))}(s);e["default"]=i.a},"16b7":function(t,e,o){"use strict";var r=o("fedc"),i=o.n(r);i.a},2909:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=u;var r=a(o("6005")),i=a(o("db90")),s=a(o("06c5")),n=a(o("3427"));function a(t){return t&&t.__esModule?t:{default:t}}function u(t){return(0,r.default)(t)||(0,i.default)(t)||(0,s.default)(t)||(0,n.default)()}},3427:function(t,e,o){"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"4a1d":function(t,e,o){var r=o("24fb");e=r(!1),e.push([t.i,".margin-text-center[data-v-0d197e0d]{text-align:center;margin:%?20?%}.border-top[data-v-0d197e0d]{border-top:1px solid #eee}.cu-form-group .title[data-v-0d197e0d]{min-width:calc(4em + 15px)}",""]),t.exports=e},6005:function(t,e,o){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=s;var r=i(o("6b75"));function i(t){return t&&t.__esModule?t:{default:t}}function s(t){if(Array.isArray(t))return(0,r.default)(t)}},"6b75":function(t,e,o){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,r=new Array(e);o<e;o++)r[o]=t[o];return r}Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"82d5":function(t,e,o){"use strict";function r(t){var e=new Date,o={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":e.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};for(var r in/(y+)/.test(fmt)&&(fmt=fmt.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length))),o)new RegExp("("+r+")").test(fmt)&&(fmt=fmt.replace(RegExp.$1,1==RegExp.$1.length?o[r]:("00"+o[r]).substr((""+o[r]).length)));return fmt}o("4d63"),o("ac1f"),o("25f0"),o("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},"9bd6":function(t,e,o){"use strict";var r;o.d(e,"b",(function(){return i})),o.d(e,"c",(function(){return s})),o.d(e,"a",(function(){return r}));var i=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("v-uni-view",[o("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[o("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸箱半成品入库")])],2),o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-view",{staticClass:"title"},[t._v("工单号:")]),o("v-uni-input",{attrs:{placeholder:"请输入工单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.boxIncGetOrderInfo.apply(void 0,arguments)}},model:{value:t.boxInc.formItem.hp_bi_WorkNo,callback:function(e){t.$set(t.boxInc.formItem,"hp_bi_WorkNo",e)},expression:"boxInc.formItem.hp_bi_WorkNo"}}),o("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("workNo")}}},[t._v("扫描")])],1),o("v-uni-view",{staticClass:"flex border-top"},[o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("工ㅤ序:")]),o("v-uni-input",{attrs:{placeholder:"请输入工序"},model:{value:t.boxInc.formItem.hp_wpl_Id,callback:function(e){t.$set(t.boxInc.formItem,"hp_wpl_Id",e)},expression:"boxInc.formItem.hp_wpl_Id"}})],1)],1),o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("机ㅤ台:")]),o("v-uni-input",{attrs:{placeholder:"请输入机台"},model:{value:t.boxInc.formItem.hp_mo_ID,callback:function(e){t.$set(t.boxInc.formItem,"hp_mo_ID",e)},expression:"boxInc.formItem.hp_mo_ID"}})],1)],1)],1),o("v-uni-view",{staticClass:"flex border-top"},[o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("班ㅤ别:")]),o("v-uni-input",{attrs:{placeholder:"请输入班别"},model:{value:t.boxInc.formItem.hp_tt_Code,callback:function(e){t.$set(t.boxInc.formItem,"hp_tt_Code",e)},expression:"boxInc.formItem.hp_tt_Code"}})],1)],1),o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("数ㅤ量:")]),o("v-uni-input",{ref:"boxInc_qty",attrs:{placeholder:"请输入数量"},model:{value:t.boxInc.formItem.Qty,callback:function(e){t.$set(t.boxInc.formItem,"Qty",e)},expression:"boxInc.formItem.Qty"}})],1)],1)],1),o("v-uni-view",{staticClass:"flex border-top"},[o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("客户名:")]),o("v-uni-input",{attrs:{disabled:!0,placeholder:"请输客户名"},model:{value:t.boxInc.formItem.ct_Desc,callback:function(e){t.$set(t.boxInc.formItem,"ct_Desc",e)},expression:"boxInc.formItem.ct_Desc"}})],1)],1),o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("产品名:")]),o("v-uni-input",{attrs:{disabled:!0,placeholder:"请输产品名"},model:{value:t.boxInc.formItem.bi_ProdName,callback:function(e){t.$set(t.boxInc.formItem,"bi_ProdName",e)},expression:"boxInc.formItem.bi_ProdName"}})],1)],1)],1),o("v-uni-view",{staticClass:"flex border-top"},[o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("规ㅤ格:")]),o("v-uni-input",{attrs:{disabled:!0,placeholder:"请输入规格"},model:{value:t.boxInc.formItem.Specs,callback:function(e){t.$set(t.boxInc.formItem,"Specs",e)},expression:"boxInc.formItem.Specs"}})],1)],1),o("v-uni-view",{staticClass:"flex-sub"},[o("v-uni-view",{staticClass:"cu-form-group"},[o("v-uni-view",{staticClass:"title"},[t._v("工单数:")]),o("v-uni-input",{attrs:{disabled:!0,placeholder:"请输工单数"},model:{value:t.boxInc.formItem.bp_ProQty,callback:function(e){t.$set(t.boxInc.formItem,"bp_ProQty",e)},expression:"boxInc.formItem.bp_ProQty"}})],1)],1)],1),o("v-uni-view",{staticClass:"cu-form-group border-top"},[o("v-uni-textarea",{attrs:{maxlength:"-1",placeholder:"请输入备注"},model:{value:t.boxInc.formItem.Remark,callback:function(e){t.$set(t.boxInc.formItem,"Remark",e)},expression:"boxInc.formItem.Remark"}})],1),t.boxInc.dataIsLoadding?o("v-uni-view",{staticClass:"margin-text-center"},[o("v-uni-button",{staticClass:"primary-btn",attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.aspSaveBoxHalfProdIn.apply(void 0,arguments)}}},[t._v("入库")])],1):t._e()],1)},s=[]},d95b:function(t,e,o){"use strict";var r=o("4ea4");o("d3b7"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("ee99")),s={data:function(){return{}},methods:{getWarehouseDataProvider:function(t,e){var o=this;return new Promise((function(r,s){o.toast.loading(),i.default.post("/warehouse/warehouse/execute/".concat(t),e).then((function(t){o.toast.hide(),r(t)})).catch((function(t){o.toast.hide(),o.toast.message("执行失败"+t),s(t)}))}))}}};e.default=s},db90:function(t,e,o){"use strict";function r(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}o("a4d3"),o("e01a"),o("d28b"),o("a630"),o("d3b7"),o("3ca3"),o("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=r},e20c:function(t,e,o){"use strict";o.r(e);var r=o("9bd6"),i=o("0d10");for(var s in i)"default"!==s&&function(t){o.d(e,t,(function(){return i[t]}))}(s);o("16b7");var n,a=o("f0c5"),u=Object(a["a"])(i["default"],r["b"],r["c"],!1,null,"0d197e0d",null,!1,r["a"],n);e["default"]=u.exports},f96e:function(t,e,o){"use strict";(function(t){var r=o("4ea4");o("99af"),o("4160"),o("d3b7"),o("159b"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i=r(o("2909")),s=r(o("b33b")),n=r(o("8fde")),a=r(o("c8d6")),u=(r(o("ee99")),r(o("82d5")),r(o("d95b"))),c={name:"boxIn",components:{zTable:n.default,uniPopup:s.default,cuCustom:a.default},mixins:[u.default],data:function(){return{currentSelected:"-1",TabCur:0,scanType:"",scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:400,boxIn:{formItem:{bi_WorkNo:"",bi_Group:"",bi_InQty:"",ct_Desc:"",bi_ProdName:"",Specs:"",bp_CBoxID:"",bp_PArtID:"",bp_ArtLB:"",bp_ProQty:""},formItemInit:{bi_WorkNo:"",bi_Group:"",bi_InQty:"",ct_Desc:"",bi_ProdName:"",Specs:"",bp_CBoxID:"",bp_PArtID:"",bp_ArtLB:"",bp_ProQty:""},dataIsLoadding:!1},boxOut:{formItem:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:"",bi_OrderNo:"",bi_OrderQty:""},formItemText:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:""},formItemInit:{bd_CarNo:"",bd_Follower:"",bd_Loador:"",bd_SenderID:"",bi_OrderNo:"",bi_OrderQty:""},car:{items:[],show:!1},follower:{items:[],show:!1},loader:{items:[],show:!1},sender:{items:[],show:!1},tableData:[]},boxInc:{formItem:{hp_wpl_Id:"",hp_mo_ID:"",hp_tt_Code:"",hp_bi_WorkNo:"",Qty:"",Remark:"",ct_Desc:"",bi_ProdName:"",Specs:"",bp_ProQty:""},formItemInit:{hp_wpl_Id:"",hp_mo_ID:"",hp_tt_Code:"",hp_bi_WorkNo:"",Qty:"",Remark:"",ct_Desc:"",bi_ProdName:"",Specs:"",bp_ProQty:""},dataIsLoadding:!1},tableColumns:[{key:"bc_No",title:"订单号",width:180,isResize:!0},{key:"ct_Desc",title:"客户名称",width:200,isResize:!0},{key:"bi_ProdName",title:"产品名称",width:200,isResize:!0},{key:"bi_OrderQty",title:"数量",width:180,isResize:!0},{key:"Specs",title:"规格",width:180,isResize:!0}]}},mounted:function(){this.messageRegister()},methods:{messageRegister:function(){var t=this;uni.$on("getSelectData",(function(e){switch(t.currentSelected){case"车牌号":t.carConfirm(e.msg);break;case"跟车员":t.followerConfirm(e.msg);break;case"装车员":t.loaderConfirm(e.msg);break;case"发货员":t.senderConfirm(e.msg);break;default:break}}))},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnToPageDataSelect:function(t,e){this.currentSelected=e,this.cache.put("setDataSelectedPageTitle",e),this.cache.put("setDataSelectedList",t),uni.navigateTo({url:"/components/list-select/list-select"})},boxInGetOrderInfo:function(){var t=this;if(""!=this.boxIn.formItem.bi_WorkNo){var e={bi_WorkNo:this.boxIn.formItem.bi_WorkNo,Flag:0};this.boxIn.dataIsLoadding=!1,this.getWarehouseDataProvider("boxScanOrder",e).then((function(e){if(e.list&&e.list.length>0)return Object.assign(t.boxIn.formItem,e.list[0]),void(t.boxIn.dataIsLoadding=!0);t.toast.message("没有该工单对应的数据")})).catch((function(e){t.errorContent="暂无数据",t.toast.message("获取数据失败:"+e)}))}else this.toast.message("请输入或扫描工单号")},boxInAspSaveBoxIn:function(){var t=this;if(""!=this.boxIn.formItem.bi_WorkNo)if(""!=this.boxIn.formItem.bi_Group)if(""!=this.boxIn.formItem.bi_InQty){var e={bi_WorkNo:this.boxIn.formItem.bi_WorkNo,bi_Group:this.boxIn.formItem.bi_Group,bi_InQty:this.boxIn.formItem.bi_InQty};this.toast.loading(),this.getWarehouseDataProvider("aspSaveBoxIn",e).then((function(e){if(t.toast.hide(),e.list.length>0)return e.list[0].ErrorStr&&""!=e.list[0].ErrorStr?void t.toast.message(e.list[0].ErrorStr):(t.toast.message("入库成功"),void(t.boxIn.formItem=JSON.parse(JSON.stringify(t.boxIn.formItemInit))));t.toast.message("入库失败")})).catch((function(e){t.toast.hide(),t.toast.message("入库失败"+e)}))}else this.toast.message("请输入数量");else this.toast.message("请输入班别");else this.toast.message("请输入或扫描工单号")},boxOutGetBaseInfo:function(t){return this.getWarehouseDataProvider("findUser",t)},getCarInfo:function(){var t=this;"车牌号"===this.currentSelected&&this.boxOut.car.items.length>0?uni.navigateTo({url:"/components/list-select/list-select"}):this.getWarehouseDataProvider("findCar").then((function(e){t.boxOut.car.items=e.list,t.boxOut.car.show=!0,t.turnToPageDataSelect(e.list,"车牌号")}))},carConfirm:function(t){this.boxOut.formItem.bd_CarNo=t.value,this.boxOut.formItemText.bd_CarNo=t.text,this.boxOut.car.show=!1},getFollowerInfo:function(){var t=this;if("跟车员"===this.currentSelected&&this.boxOut.follower.items.length>0)return uni.navigateTo({url:"/components/list-select/list-select"}),void(this.boxOut.follower.show=!0);this.boxOutGetBaseInfo({workType:"5,18"}).then((function(e){t.boxOut.follower.items=e.list,t.boxOut.follower.show=!0,t.turnToPageDataSelect(e.list,"跟车员")}))},followerConfirm:function(t){this.boxOut.formItem.bd_Follower=t.value,this.boxOut.formItemText.bd_Follower=t.text,this.boxOut.follower.show=!1},getLoaderInfo:function(){var t=this;if("装车员"===this.currentSelected&&this.boxOut.loader.items.length>0)return uni.navigateTo({url:"/components/list-select/list-select"}),void(this.boxOut.loader.show=!0);this.boxOutGetBaseInfo({workType:"6,18"}).then((function(e){t.boxOut.loader.items=e.list,t.boxOut.loader.show=!0,t.turnToPageDataSelect(e.list,"装车员")}))},loaderConfirm:function(t){this.boxOut.formItem.bd_Loador=t.value,this.boxOut.formItemText.bd_Loador=t.text,this.boxOut.loader.show=!1},getSenderInfo:function(){var t=this;if("发货员"===this.currentSelected&&this.boxOut.sender.items.length>0)return uni.navigateTo({url:"/components/list-select/list-select"}),void(this.boxOut.sender.show=!0);this.boxOutGetBaseInfo({workType:"2,18"}).then((function(e){t.boxOut.sender.items=e.list,t.boxOut.sender.show=!0,t.turnToPageDataSelect(e.list,"发货员")}))},senderConfirm:function(t){this.boxOut.formItem.bd_SenderID=t.value,this.boxOut.formItemText.bd_SenderID=t.text,this.boxOut.sender.show=!1},boxOutGetOrderInfo:function(){var t=this;if(""!=this.boxOut.formItem.bi_OrderNo)if(""!=this.boxOut.formItem.bi_OrderQty){for(var e=0;e<this.boxOut.tableData.length;e++){var o=this.boxOut.tableData[e];if(o.bc_No==this.boxOut.formItem.bi_OrderNo)return this.boxOut.formItem.bi_OrderNo="",void this.toast.message("订单已存在")}var r={bc_No:this.boxOut.formItem.bi_OrderNo,Flag:1};this.errorContent="数据加载中...",this.getWarehouseDataProvider("boxScanOrder",r).then((function(e){if(e.list&&e.list.length>0){var o=e.list[0];return o.bi_OrderQty=t.boxOut.formItem.bi_OrderQty,void(t.boxOut.tableData=[].concat((0,i.default)(t.boxOut.tableData),[o]))}t.errorContent="暂无数据",t.toast.message("没有该订单号对应的数据")})).catch((function(e){t.errorContent="暂无数据"}))}else this.toast.message("请输入数量");else this.toast.message("请输入订单号")},aspSaveBoxOutTemp:function(){var t=this,e=[],o=[];if(this.boxOut.tableData.forEach((function(t,r){e.push(t.bc_No),o.push(t.bi_OrderQty)})),0!=e.length&&0!=o&&e.length==o.length){var r={bd_CarNo:this.boxOut.formItem.bd_CarNo,bd_Follower:this.boxOut.formItem.bd_Follower,bd_Loador:this.boxOut.formItem.bd_Loador,bd_SenderID:this.boxOut.formItem.bd_SenderID,OrderQtyStr:o.toString(),NoStr:e.toString()};this.getWarehouseDataProvider("aspSaveBoxOutTemp",r).then((function(e){if(e.list.length>0)return e.list[0].ErrorStr&&""!=e.list[0].ErrorStr?void t.toast.message(e.list[0].ErrorStr):(t.toast.message("出仓成功"),t.boxOut.formItem=JSON.parse(JSON.stringify(t.boxOut.formItemInit)),void(t.boxOut.tableData=[]));t.toast.message("出仓失败")}))}else this.toast.message("数据不能为空,提交数据不完整")},boxIncGetOrderInfo:function(){var t=this;if(""!=this.boxInc.formItem.hp_bi_WorkNo){var e={bi_WorkNo:this.boxInc.formItem.hp_bi_WorkNo,Flag:0};this.boxInc.dataIsLoadding=!1,this.getWarehouseDataProvider("boxScanOrder",e).then((function(e){if(e.list&&e.list.length>0)return Object.assign(t.boxInc.formItem,e.list[0]),void(t.boxInc.dataIsLoadding=!0);t.toast.message("没有该工单对应的数据"),t.boxInc.formItem.hp_bi_WorkNo=""})).catch((function(t){}))}else this.toast.message("请输入或扫描工单号")},aspSaveBoxHalfProdIn:function(){var t=this;if(""!=this.boxInc.formItem.hp_bi_WorkNo)if(""!=this.boxInc.formItem.Qty){var e={hp_bi_WorkNo:this.boxInc.formItem.hp_bi_WorkNo,hp_wpl_Id:this.boxInc.formItem.hp_wpl_Id,hp_mo_ID:this.boxInc.formItem.hp_mo_ID,hp_tt_Code:this.boxInc.formItem.hp_tt_Code,Qty:this.boxInc.formItem.Qty,Remark:this.boxInc.formItem.Remark};this.getWarehouseDataProvider("aspSaveBoxHalfProdIn",e).then((function(e){if(e.list.length>0)return e.list[0].ErrorStr&&""!=e.list[0].ErrorStr?void t.toast.message(e.list[0].ErrorStr):(t.toast.message("入仓成功"),void(t.boxInc.formItem=JSON.parse(JSON.stringify(t.boxInc.formItemInit))));t.toast.message("入仓失败")}))}else this.toast.message("请输入数量");else this.toast.message("请输入或扫描工单号")},turnOnScanCode:function(e){this.scanType=e;var o=this;uni.scanCode({scanType:"barCode",success:function(e){switch(t("log","条码内容："+e.result," at pages/warehouse/boxIn/banchengpinruku.vue:585"),o.TabCur){case 0:o.boxIn.formItem.bi_WorkNo=e.result,o.boxInGetOrderInfo();break;case 1:o.boxOut.formItem.bi_OrderNo=e.result;break;case 2:o.boxInc.formItem.hp_bi_WorkNo=e.result,o.boxIncGetOrderInfo();break;default:break}}})}}};e.default=c}).call(this,o("0de9")["log"])},fedc:function(t,e,o){var r=o("4a1d");"string"===typeof r&&(r=[[t.i,r,""]]),r.locals&&(t.exports=r.locals);var i=o("4f06").default;i("47d688ff",r,!0,{sourceMap:!1,shadowMode:!1})}}]);