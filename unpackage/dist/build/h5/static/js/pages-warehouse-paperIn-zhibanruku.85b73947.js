(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-paperIn-zhibanruku"],{"1c82":function(t,e,s){"use strict";s.d(e,"b",(function(){return r})),s.d(e,"c",(function(){return i})),s.d(e,"a",(function(){return a}));var a={selectDropdown:s("5c5c").default,searchForm:s("cbc5").default},r=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("v-uni-view",[s("cu-custom",{staticClass:"titlefrom",attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[s("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸板入库")])],2),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("selectDropdown",{ref:"lineDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindLineSeparation",title:"线ㅤ别",placeholdertext:"ㅤ请选择线别"},model:{value:t.paperInFormItems.lineCode,callback:function(e){t.$set(t.paperInFormItems,"lineCode",e)},expression:"paperInFormItems.lineCode"}})],1),s("v-uni-view",{staticClass:"flex-sub"},[s("selectDropdown",{ref:"groupDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindClassBan",title:"班ㅤ别",placeholdertext:"ㅤ请选择班别",params:t.groupparams},model:{value:t.paperInFormItems.groupCode,callback:function(e){t.$set(t.paperInFormItems,"groupCode",e)},expression:"paperInFormItems.groupCode"}})],1)],1),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("selectDropdown",{ref:"stationDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindSearchStation",title:"仓ㅤ位",placeholdertext:"ㅤ请选择仓位",params:t.stationparams},model:{value:t.paperInFormItems.stationCode,callback:function(e){t.$set(t.paperInFormItems,"stationCode",e)},expression:"paperInFormItems.stationCode"}})],1),s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("日ㅤ期:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.date,callback:function(e){t.$set(t.paperInFormItems,"date",e)},expression:"paperInFormItems.date"}})],1)],1)],1),s("v-uni-view",{staticClass:"cu-form-group border-top"},[s("v-uni-view",{staticClass:"title"},[t._v("工单号:")]),s("v-uni-input",{attrs:{placeholder:"请扫描工单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.barCodeBlur.apply(void 0,arguments)}},model:{value:t.paperInFormItems.fOrderNo,callback:function(e){t.$set(t.paperInFormItems,"fOrderNo",e)},expression:"paperInFormItems.fOrderNo"}}),s("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("in")}}},[t._v("扫描")])],1),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("客ㅤ户:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.CustName,callback:function(e){t.$set(t.paperInFormItems,"CustName",e)},expression:"paperInFormItems.CustName"}})],1)],1)],1),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("订单数:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.Qty,callback:function(e){t.$set(t.paperInFormItems,"Qty",e)},expression:"paperInFormItems.Qty"}})],1)],1)],1),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("已入库:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.INQty,callback:function(e){t.$set(t.paperInFormItems,"INQty",e)},expression:"paperInFormItems.INQty"}})],1)],1),s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title",staticStyle:{color:"red"}},[t._v("入库数:")]),s("v-uni-input",{attrs:{type:"number",placeholder:"请输入数量"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.checkFdNum.apply(void 0,arguments)}},model:{value:t.paperInFormItems.FQty,callback:function(e){t.$set(t.paperInFormItems,"FQty",e)},expression:"paperInFormItems.FQty"}})],1)],1)],1),s("v-uni-view",{staticClass:"flex border-top"},[s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("纸ㅤ质:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.ArtID,callback:function(e){t.$set(t.paperInFormItems,"ArtID",e)},expression:"paperInFormItems.ArtID"}})],1)],1),s("v-uni-view",{staticClass:"flex-sub"},[s("v-uni-view",{staticClass:"cu-form-group"},[s("v-uni-view",{staticClass:"title"},[t._v("楞ㅤ别:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.LB,callback:function(e){t.$set(t.paperInFormItems,"LB",e)},expression:"paperInFormItems.LB"}})],1)],1)],1),s("v-uni-view",{staticClass:"cu-form-group border-top"},[s("v-uni-view",{staticClass:"title"},[t._v("规ㅤ格:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.Size,callback:function(e){t.$set(t.paperInFormItems,"Size",e)},expression:"paperInFormItems.Size"}})],1),s("v-uni-view",{staticClass:"cu-form-group border-top"},[s("v-uni-view",{staticClass:"title"},[t._v("压ㅤ线:")]),s("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.YxStr,callback:function(e){t.$set(t.paperInFormItems,"YxStr",e)},expression:"paperInFormItems.YxStr"}})],1),s("v-uni-view",{staticClass:"cu-form-group border-top"},[s("v-uni-view",{staticClass:"title"},[t._v("备ㅤ注:")]),s("v-uni-textarea",{attrs:{disabled:!0,maxlength:"-1"},model:{value:t.paperInFormItems.Oremark,callback:function(e){t.$set(t.paperInFormItems,"Oremark",e)},expression:"paperInFormItems.Oremark"}})],1),s("v-uni-view",{staticClass:"flex solid-bottom padding justify-around chucangbtm"},[s("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetFrom.apply(void 0,arguments)}}},[t._v("清除")]),s("v-uni-button",{staticClass:"bg-grey radius",attrs:{disabled:t.disable,type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paprtIn.apply(void 0,arguments)}}},[t._v("保存")])],1),s("searchForm",{ref:"searchForm",attrs:{dataSource:t.dataSource},on:{getSelectDataInfo:function(e){arguments[0]=e=t.$handleEvent(e),t.getSelectDataInfo.apply(void 0,arguments)}}})],1)},i=[]},4070:function(t,e,s){"use strict";s.r(e);var a=s("1c82"),r=s("9e0c");for(var i in r)"default"!==i&&function(t){s.d(e,t,(function(){return r[t]}))}(i);s("7efa");var n,o=s("f0c5"),u=Object(o["a"])(r["default"],a["b"],a["c"],!1,null,"655d3830",null,!1,a["a"],n);e["default"]=u.exports},"58be":function(t,e,s){"use strict";(function(t){var a=s("4ea4");s("13d5"),s("a9e3"),s("d3b7"),s("ac1f"),s("25f0"),s("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=a(s("50ce")),i=(a(s("c9dc")),a(s("ee99"))),n={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:20,total:100},isLoaddingData:!1,otherHeight:0,leftContentHeight:0,avgWidth:90}},computed:{CustomBarHeight:function(){return this.CustomBar},userInfo:function(){var t=r.default.get(this.appConst.CLIENT_USER_CACHE_NAME);return t}},methods:{checkScan:function(){return void 0!==window},addThousandthSign:function(t){if(t){var e=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return t.toString().replace(e,"$1,")}return"0.00"},rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},onChangeInToCache:function(t,e){e&&e.tokenKey&&r.default.put(String(e.tokenKey),t)},getTableAvgWidth:function(t){var e=0;this.avgWidth=90;var s=0;return t&&t.length>0&&(e=t.length,s=t.reduce((function(t,e){return t+=Number(e.$width?e.$width:0),t}),0)),s>0&&e>0&&(this.avgWidth=~~(s/e)),this.avgWidth},getOrPostDataBy:function(t,e){var s=this;return this.isLoaddingData=!0,this.toast.loading(),new Promise((function(a,r){try{i.default.post(t,e).then((function(t){s.toast.hide(),a(t),s.isLoaddingData=!1})).catch((function(t){s.toast.hide(),r(t),"string"===typeof t?s.toast.message(t):s.toast.message("系统繁忙，请稍后再试!"),s.isLoaddingData=!1}))}catch(n){s.toast.hide(),s.isLoaddingData=!1}}))},getOtherContentHeight:function(){var e=this,s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(a,r){var i=e,n=uni.createSelectorQuery().select("."+s);n.boundingClientRect((function(e){t("log","other Height:"+e.height," at mixins/index.js:118"),i.otherHeight=e.height,e.height,a(e.height)})).exec((function(t){}))}))},setTableHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.otherHeight=0);try{var s=uni.getSystemInfoSync();return t("log","CustomBar:"+this.CustomBar," at mixins/index.js:134"),this.leftContentHeight=s.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(a){}}}};e.default=n}).call(this,s("0de9")["log"])},"7efa":function(t,e,s){"use strict";var a=s("d176"),r=s.n(a);r.a},"9e0c":function(t,e,s){"use strict";s.r(e);var a=s("d94c"),r=s.n(a);for(var i in a)"default"!==i&&function(t){s.d(e,t,(function(){return a[t]}))}(i);e["default"]=r.a},c9dc:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a={title:"webApp",isRunApp:!1,cookieExpires:1,baseUrl:{dev:"http://192.168.0.218:8080",pro:"http://192.168.0.218:8080"},baseImgUrl:"http://192.168.0.218:8080/clerp-app-api",homeName:"home",plugin:{}};e.default=a},d176:function(t,e,s){var a=s("f858");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var r=s("4f06").default;r("799105ba",a,!0,{sourceMap:!1,shadowMode:!1})},d94c:function(t,e,s){"use strict";(function(t){var a=s("4ea4");s("c975"),s("d81d"),s("fb6a"),s("accc"),s("a9e3"),s("d3b7"),s("ac1f"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,s("96cf");var r=a(s("1da1")),i=a(s("5c5c")),n=a(s("8fde")),o=a(s("c8d6")),u=a(s("ee99")),p=a(s("58be")),c=a(s("a29c")),m={name:"paperIn",components:{zTable:n.default,cuCustom:o.default,searchForm:c.default,selectDropdown:i.default},mixins:[p.default],data:function(){return{stationparams:{type:2,modelCode:"paper_in"},groupparams:{type:2,procType:5,modelCode:"paper_in"},disable:!0,modelVal:null,dataSource:[],deepList:[],workHouseList:[],lineList:[],modalName:null,TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:0,findGoodsTableDataItems:[],paperOutTableDataItems:[],paperInFormItems:{instruct:"",station:"",stationCode:"",fOrderNo:"",line:"",lineCode:"",group:"",groupCode:"",fQty:"",fDNum:"",ArtID:"",CustID:"",CustName:"",INQty:"",FQty:"",LB:"",MinSize:"",Size:"",YxStr:"",Qty:"",Oremark:"",date:(new Date).toISOString().slice(0,10)},findGoodsItem:{fOrderNo:""},paperOutItem:{fOrderNo:"",batch:""}}},mounted:function(){this.getTableHeight(),this.getworkHouseList()},onReady:function(){this.getTableHeight(),this.getworkHouseList()},methods:{getOtherContentHeight:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(s,a){var r=t,i=uni.createSelectorQuery().in(r).select("."+e);i.boundingClientRect((function(t){r.otherHeight=t.height,t.height,s(t.height)})).exec((function(t){}))}))},getTableHeight:function(){var e=this;return(0,r.default)(regeneratorRuntime.mark((function s(){var a,r;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return a=e,s.next=3,a.getOtherContentHeight("titlefrom");case 3:r=s.sent,t("log",r," at pages/warehouse/paperIn/zhibanruku.vue:232");case 5:case"end":return s.stop()}}),s)})))()},setSearchDataListSource:function(t){this.$refs.searchForm.$data.searchKeyword="",this.currentSelect=t,this.$refs["searchForm"].isMultipel=!1,this.$refs["searchForm"].isShowSearchList=!0,"deep"===t?(this.dataSource=this.deepList,this.$refs["searchForm"].dataSourceList=this.deepList):"line"===t?(this.dataSource=this.lineList,this.$refs["searchForm"].dataSourceList=this.lineList):(this.dataSource=this.workHouseList,this.$refs["searchForm"].dataSourceList=this.workHouseList)},getSelectDataInfo:function(t){switch(this.currentSelect){case"deep":this.paperInFormItems.group=t.ct_Desc,this.paperInFormItems.groupCode=t.type;break;case"workHouse":this.paperInFormItems.station=t.ct_Desc,this.paperInFormItems.stationCode=t.type;break;case"line":this.paperInFormItems.line=t.ct_Desc,this.paperInFormItems.lineCode=t.type;break;default:break}},getworkHouseList:function(){var t=this;this.toast.loading(),u.default.post("/scan/searchStation?type=2").then((function(e){var s=e.map((function(t){var e={type:t.code,ct_Desc:t.name};return e}));t.workHouseList=s,t.toast.hide()})).catch((function(e){t.toast.message("数据加载失败")}))},checkFdNum:function(){var t=this,e=Number(this.paperInFormItems.FQty),s=Number(this.paperInFormItems.INQty),a=Number(this.paperInFormItems.Qty);e>a-s&&uni.showModal({title:"提示",content:"累计入库数已大于订单数,是否继续？",success:function(e){e.cancel&&(t.paperInFormItems.FQty="")}})},resetFrom:function(){this.paperInFormItems.fOrderNo="",this.paperInFormItems.fQty="",this.paperInFormItems.fDNum="",this.paperInFormItems.ArtID="",this.paperInFormItems.CustID="",this.paperInFormItems.CustName="",this.paperInFormItems.INQty="",this.paperInFormItems.LB="",this.paperInFormItems.MinSize="",this.paperInFormItems.Size="",this.paperInFormItems.YxStr="",this.paperInFormItems.Qty="",this.paperInFormItems.Oremark="",this.paperInFormItems.FQty=""},hideModal:function(t){this.modalName=null},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnOnScanCode:function(e){if(this.checkScan())this.toast.message('请在"e包装"公众号中下载APP后扫码!');else{var s=this;this.resetFrom(),uni.scanCode({scanType:"barCode",success:function(a){t("log","条码内容："+a.result," at pages/warehouse/paperIn/zhibanruku.vue:346");var r=a.result.indexOf(","),i=0;switch(t("log",r," at pages/warehouse/paperIn/zhibanruku.vue:349"),i=r<0?a.result:a.result.substring(0,r),t("log",i," at pages/warehouse/paperIn/zhibanruku.vue:355"),e){case"in":s.paperInFormItems.fOrderNo=i,s.getParamsFromScanCode();break;case"out":this.paperOutItem.fOrderNo=a.result;break;case"search":this.findGoodsItem.fOrderNo=a.result;break;default:break}}})}},barCodeBlur:function(){""!=this.paperInFormItems.lineCode?""!=this.paperInFormItems.groupCode?""!=this.paperInFormItems.stationCode?""!=this.paperInFormItems.fOrderNo?this.getParamsFromScanCode():this.toast.message("请输入或扫描条码"):this.toast.message("请先选择仓位"):this.toast.message("请先选择班别"):this.toast.message("请先选择线别")},getpaperInFormItems:function(t){this.paperInFormItems.ArtID=t.ArtID,this.paperInFormItems.CustID=t.CustID,this.paperInFormItems.CustName=t.CustName,this.paperInFormItems.LB=t.LB,this.paperInFormItems.MinSize=t.MinSize,this.paperInFormItems.Oremark=t.Oremark,this.paperInFormItems.Qty=t.Qty,this.paperInFormItems.INQty=t.INQty,this.paperInFormItems.Size=t.Size,this.paperInFormItems.YxStr=t.YxStr,this.paperInFormItems.FQty=t.FQty},getParamsFromScanCode:function(){var t=this,e=this.paperInFormItems.fOrderNo,s=[];this.toast.loading(),u.default.post("/proc/execute/appSpGetPaperCOInfoForAPP",{OrderNo:e}).then((function(e){if(0===e.list.length)return t.toast.hide(),void t.toast.message("对不起，系统没有此工单号，请重新扫描!");t.disable=!1,t.getpaperInFormItems(e.list[0]),t.toast.hide()})),Object.assign(this.paperInFormItems,s)},paperInRequest:function(t){return u.default.post("/proc/execute/appSpScanOrder",t)},ValidateData:function(){var t=!1;return""==this.paperInFormItems.lineCode&&(this.toast.message("请输入线别"),this.disable=!1,t=!0),""==this.paperInFormItems.stationCode&&(this.toast.message("请输入仓位"),this.disable=!1,t=!0),""==this.paperInFormItems.groupCode&&(this.toast.message("请输入班别"),this.disable=!1,t=!0),""==this.paperInFormItems.fOrderNo&&(this.toast.message("请扫描工单号"),this.disable=!1,t=!0),""===this.paperInFormItems.FQty&&(this.toast.message("请输入入库数"),this.disable=!1,t=!0),t},paprtIn:function(){var t=this;if(!this.ValidateData()){var e=this.paperInFormItems.fOrderNo+"*0*"+this.paperInFormItems.FQty+"*"+this.paperInFormItems.lineCode+"*"+this.paperInFormItems.groupCode,s=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a={UserID:s.erpUserCode,BarCodeStr:e,Station:this.paperInFormItems.stationCode,Flag:0,FOrderNo:this.paperInFormItems.fOrderNo,FQty:this.paperInFormItems.FQty,FDNum:0,FLine:this.paperInFormItems.lineCode,FClass:this.paperInFormItems.groupCode,Remark:this.paperInFormItems.Oremark,OrderQty:this.paperInFormItems.Qty};this.toast.loading(),this.paperInRequest(a).then((function(e){t.toast.hide(),e.list&&1==e.list[0].res?(t.toast.message("入仓成功"),t.resetFrom(),t.disable=!0):(t.toast.message("入仓失败"),t.getParamsFromScanCode())})).catch((function(e){t.toast.hide(),t.toast.message("入仓失败"),t.getParamsFromScanCode()}))}}}};e.default=m}).call(this,s("0de9")["log"])},f858:function(t,e,s){var a=s("24fb");e=a(!1),e.push([t.i,".margin-text-center[data-v-655d3830]{text-align:center;margin:%?20?%}.border-top[data-v-655d3830]{border-top:1px solid #eee}.cu-form-group .title[data-v-655d3830]{min-width:calc(4em + 15px)}.chucangbtm[data-v-655d3830]{position:fixed;bottom:0;width:100%;background-color:#fff;z-index:2}",""]),t.exports=e}}]);