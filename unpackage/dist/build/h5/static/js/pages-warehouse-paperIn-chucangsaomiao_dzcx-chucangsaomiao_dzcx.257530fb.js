(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-paperIn-chucangsaomiao_dzcx-chucangsaomiao_dzcx"],{4770:function(t,e,a){"use strict";a.r(e);var i=a("86c9"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},5401:function(t,e,a){"use strict";var i=a("91c9"),n=a.n(i);n.a},"58be":function(t,e,a){"use strict";(function(t){var i=a("4ea4");a("13d5"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=i(a("50ce")),s=(i(a("c9dc")),i(a("ee99"))),r={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:20,total:100},isLoaddingData:!1,otherHeight:0,leftContentHeight:0,avgWidth:90}},computed:{CustomBarHeight:function(){return this.CustomBar},userInfo:function(){var t=n.default.get(this.appConst.CLIENT_USER_CACHE_NAME);return t}},methods:{checkScan:function(){return void 0!==window},addThousandthSign:function(t){if(t){var e=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return t.toString().replace(e,"$1,")}return"0.00"},rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},onChangeInToCache:function(t,e){e&&e.tokenKey&&n.default.put(String(e.tokenKey),t)},getTableAvgWidth:function(t){var e=0;this.avgWidth=90;var a=0;return t&&t.length>0&&(e=t.length,a=t.reduce((function(t,e){return t+=Number(e.$width?e.$width:0),t}),0)),a>0&&e>0&&(this.avgWidth=~~(a/e)),this.avgWidth},getOrPostDataBy:function(t,e){var a=this;return this.isLoaddingData=!0,this.toast.loading(),new Promise((function(i,n){try{s.default.post(t,e).then((function(t){a.toast.hide(),i(t),a.isLoaddingData=!1})).catch((function(t){a.toast.hide(),n(t),"string"===typeof t?a.toast.message(t):a.toast.message("系统繁忙，请稍后再试!"),a.isLoaddingData=!1}))}catch(r){a.toast.hide(),a.isLoaddingData=!1}}))},getOtherContentHeight:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(i,n){var s=e,r=uni.createSelectorQuery().select("."+a);r.boundingClientRect((function(e){t("log","other Height:"+e.height," at mixins/index.js:118"),s.otherHeight=e.height,e.height,i(e.height)})).exec((function(t){}))}))},setTableHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.otherHeight=0);try{var a=uni.getSystemInfoSync();return t("log","CustomBar:"+this.CustomBar," at mixins/index.js:134"),this.leftContentHeight=a.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(i){}}}};e.default=r}).call(this,a("0de9")["log"])},"5ccb":function(t,e,a){"use strict";var i;a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}));var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸板出仓扫描")])],2),a("v-uni-form",{staticClass:"xunhoutop"},[a("v-uni-view",{ref:"elForm",staticClass:"bodyContentHeight2 elForm"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("订单号:")]),a("v-uni-input",{attrs:{placeholder:"请输入订单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.paperOut()}},model:{value:t.paperOutItem.fOrderNo,callback:function(e){t.$set(t.paperOutItem,"fOrderNo",e)},expression:"paperOutItem.fOrderNo"}}),a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("out")}}},[t._v("扫描")])],1),a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("装车数:")]),a("v-uni-input",{attrs:{placeholder:"请输入装车数"},model:{value:t.CLQtyNumber,callback:function(e){t.CLQtyNumber=e},expression:"CLQtyNumber"}}),a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.confirmQty.apply(void 0,arguments)}}},[t._v("确认")])],1)],1)],1),a("v-uni-view",{style:{height:t.topHeight+"px"}}),a("v-uni-view",{staticClass:"example"},[a("v-table",{attrs:{"row-class-name":t.rowClassNameFn,columns:t.findGoodsColumns,list:t.paperOutTableDataItems,selection:"single","td-width":150,height:t.tableHeight},on:{"on-selection-change":function(e){arguments[0]=e=t.$handleEvent(e),t.onClick.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"chucangbtm"},[a("v-uni-view",{ref:"elBtn",staticClass:"flex solid-bottom padding justify-around elBtn"},[a("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetFrom.apply(void 0,arguments)}}},[t._v("清除")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{"data-target":"DialogModal1",type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.deletelist.apply(void 0,arguments)}}},[t._v("删除")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{"data-target":"DialogModal1",type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.updetelist.apply(void 0,arguments)}}},[t._v("修改")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paprtIn.apply(void 0,arguments)}}},[t._v("保存")])],1)],1),a("v-uni-view",{staticClass:"cu-modal",class:"DialogModal1"==t.modalName?"show":""},[a("v-uni-view",{staticClass:"cu-dialog"},[a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"content"},[t._v(t._s(t.edittitle))]),a("v-uni-view",{staticClass:"action",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close text-red"})],1)],1),a("v-uni-view",{staticClass:"grid-body"},[a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",{staticStyle:{color:"red"}},[a("v-uni-text",[t._v("工单号:"+t._s(t.findGoodsTableDataItems.OrderNo))])],1)],1),a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",[a("v-uni-text",[t._v("工单信息:"+t._s(t.findGoodsTableDataItems.w_Name)+","+t._s(t.findGoodsTableDataItems.PaperInfo))])],1)],1),a("v-uni-view",{staticClass:"grid-flex padding-10"},[a("v-uni-view",[a("v-uni-text",[t._v("库存:"+t._s(t.findGoodsTableDataItems.Store))])],1),a("v-uni-view",[a("v-uni-text",[t._v("未送数:"+t._s(t.findGoodsTableDataItems.NoDueQty))])],1),a("v-uni-view",[a("v-uni-text",[t._v("装车数:"+t._s(t.findGoodsTableDataItems.CLQty))])],1)],1)],1),"修改"==t.edittitle?a("v-uni-view",{staticClass:"updete",staticStyle:{"font-size":"20px"}},[a("v-uni-view",{staticClass:"title"},[t._v("装车数:")]),a("v-uni-input",{staticStyle:{border:"1px solid red",width:"30%"},attrs:{type:"number"},model:{value:t.CLQty,callback:function(e){t.CLQty=e},expression:"CLQty"}})],1):t._e(),a("v-uni-view",{staticClass:"cu-bar bg-white justify-end"},[a("v-uni-view",{staticClass:"action"},[a("v-uni-button",{staticClass:"cu-btn line-green text-green",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-button",{staticClass:"cu-btn bg-green margin-left",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.hideModal("ok")}}},[t._v("确定")])],1)],1)],1)],1)],1)},s=[]},"86c9":function(t,e,a){"use strict";(function(t){var i=a("4ea4");a("c975"),a("a434"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0,a("96cf");var n=i(a("1da1")),s=i(a("cebd")),r=i(a("07ee")),o=i(a("b073")),u=i(a("ba48")),l=i(a("8fde")),c=i(a("c8d6")),d=i(a("ee99")),p=i(a("e4fc")),h=i(a("58be")),f={name:"paperIn",components:{vTable:p.default,zTable:l.default,cuCustom:c.default,tTable:s.default,tTh:r.default,tTr:o.default,tTd:u.default},mixins:[h.default],data:function(){return{CLQtyNumber:0,CLQty:"",edittitle:"",topHeight:0,leftContentHeight:0,index:null,modalName:"",TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:0,findGoodsTableDataItems:[],paperOutTableDataItems:[],paperInFormItems:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},paperInFormInit:{instruct:"",station:"",fOrderNo:"",line:"",group:"",fQty:"",fDNum:"",desc:""},findGoodsItem:{fOrderNo:""},paperOutItem:{fOrderNo:"",batch:""},findGoodsColumns:[{key:"Serial",title:"序号",$width:80},{key:"CustName",title:"客户",$width:180,titleAlign:"center",columnAlign:"center"},{key:"OrderNo",title:"订单号",$width:200},{key:"Store",title:"库存数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"NoDueQty",title:"未送数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"CLQty",title:"装车数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"ScanNum",title:"扫描次数",$width:120,titleAlign:"center",columnAlign:"right"},{key:"PaperInfo",title:"纸板信息",$width:220,titleAlign:"center",columnAlign:"center"},{key:"MinSize",title:"小尺寸",$width:200,titleAlign:"center",columnAlign:"center"},{key:"AreaName",title:"地区",$width:130,titleAlign:"center",columnAlign:"center"}]}},mounted:function(){this.getTableHeight(),this.getTemporaryData()},onShow:function(){this.getTemporaryData()},methods:{rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},getTemporaryData:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a={UserID:e.erpUserCode,Flag:2};this.toast.loading(),d.default.post("/warehouse/warehouse/execute/appPaperCarListAppTemp",a).then((function(e){t.paperOutTableDataItems=e.list;for(var a=0;a<t.paperOutTableDataItems.length;a++)t.paperOutTableDataItems[a].Serial=a+1;t.toast.hide()}))},getTableHeight:function(){var t=this;return(0,n.default)(regeneratorRuntime.mark((function e(){var a,i,n,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return a=t,i=a.setTableHeight(),e.next=4,a.getOtherContentHeight("elForm");case 4:return n=e.sent,e.next=7,a.getOtherContentHeight("elBtn");case 7:s=e.sent,t.topHeight=n,setTimeout((function(){a.tableHeight=i-n-s}),500);case 10:case"end":return e.stop()}}),e)})))()},operationFromrequst:function(t){return d.default.post("/warehouse/warehouse/execute/appPaperCarListAppTemp",t)},resetFrom:function(){var t=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(0!=this.paperOutTableDataItems.length){this.paperOutTableDataItems=[],this.paperOutItem.fOrderNo="";var e={UserID:t.erpUserCode,Flag:5};this.operationFromrequst(e)}else this.toast.message("请输入工单号")},updetelist:function(t){0!=this.paperOutTableDataItems.length?null!=this.index?(this.edittitle="修改",this.modalName=t.currentTarget.dataset.target):this.toast.message("请选择操作数据"):this.toast.message("请输入工单号")},hideModal:function(t){var e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),a=this.index,i={Flag:3,UserID:e.erpUserCode,CLQty:Number(this.CLQty),OrderNo:this.paperOutTableDataItems[a].OrderNo};if("ok"==t)if("修改"==this.edittitle)this.paperOutTableDataItems[a].CLQty=JSON.parse(Number(this.CLQty)),this.operationFromrequst(i),this.modalName=null,this.CLQty="",this.onClick();else{var n={Flag:4,OrderNo:this.paperOutTableDataItems[a].OrderNo,UserID:e.erpUserCode,CLQty:""};this.operationFromrequst(n),this.paperOutTableDataItems.splice(a,1);for(var s=0;s<this.paperOutTableDataItems.length;s++)this.paperOutTableDataItems[s].Serial=s+1;this.modalName=null}else this.modalName=null},deletelist:function(t){this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(0!=this.paperOutTableDataItems.length)if(null!=this.index){this.index;this.edittitle="删除",this.modalName=t.currentTarget.dataset.target}else this.toast.message("请选择操作数据");else this.toast.message("请输入工单号")},onClick:function(t){void 0!=t?(this.findGoodsTableDataItems=JSON.parse(JSON.stringify(t.new.item)),this.index=t.new.index):this.findGoodsTableDataItems=this.paperOutTableDataItems[this.index]},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnOnScanCode:function(e){if(void 0===window){var a=this;uni.scanCode({scanType:"barCode",success:function(i){var n=i.result.indexOf(","),s=0;switch(t("log",n," at pages/warehouse/paperIn/chucangsaomiao_dzcx/chucangsaomiao_dzcx.vue:399"),s=n<0?i.result:i.result.substring(0,n),t("log","条码内容："+i.result," at pages/warehouse/paperIn/chucangsaomiao_dzcx/chucangsaomiao_dzcx.vue:405"),e){case"in":a.paperInFormItems.instruct=s,a.getParamsFromScanCode();break;case"out":a.paperOutItem.fOrderNo=s,a.paperOut();break;case"search":this.findGoodsItem.fOrderNo=s;break;default:break}}})}else this.toast.message('请在"e包装"公众号中下载APP后扫码!')},paperInRequest:function(t,e){return d.default.post(t,e)},paprtIn:function(){var t=this;if(0!=this.paperOutTableDataItems.length){var e=this.paperOutItem.fOrderNo;uni.navigateTo({url:"../outStorageEdit?fOrderNo="+encodeURIComponent(e),success:function(e){t.paperOutTableDataItems=[]}})}else this.toast.message("请输入工单号")},findGoods:function(){var t=this;if(""!=this.findGoodsItem.fOrderNo){var e={FOrderNo:this.findGoodsItem.fOrderNo,BarCodeStr:this.findGoodsItem.fOrderNo,Flag:2};this.paperInRequest(e).then((function(t){})).catch((function(e){t.toast.message("暂无数据")}))}else this.toast.message("请输入或扫描工单号")},paperOut:function(){var t=this,e=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME);if(""==this.paperOutItem.fOrderNo)return this.toast.message("请输入或扫描订单号"),void(this.paperOutItem.fOrderNo="");var a={BarCodeStr:this.paperOutItem.fOrderNo,Station:"",Flag:3,UserID:e.erpUserCode},i="/warehouse/warehouse/execute/appSpScanOrderDzcx";this.toast.loading(),this.paperInRequest(i,a).then((function(e){e.list.length>0?(t.CLQtyNumber=e.list[0].CLQty,t.toast.hide()):(t.toast.hide(),t.toast.message("该订单号暂无数据"),t.paperOutItem.fOrderNo="")}))},confirmQty:function(){var t=this,e={BarCodeStr:this.paperOutItem.fOrderNo,Station:"",Flag:2,UserID:this.userInfo.erpUserCode,CLQty:this.CLQtyNumber},a="/warehouse/warehouse/execute/appSpScanOrderDzcx";this.toast.loading(),this.paperInRequest(a,e).then((function(e){if(t.onlyoneStr(e)){t.paperOutTableDataItems.push(JSON.parse(JSON.stringify(e.list[0])));for(var a=0;a<t.paperOutTableDataItems.length;a++)t.paperOutTableDataItems[a].Serial=a+1}t.toast.hide()}))},onlyoneStr:function(t){for(var e=0;e<this.paperOutTableDataItems.length;e++){var a=this.paperOutItem.fOrderNo;if(a==this.paperOutTableDataItems[e].OrderNo)return this.paperOutTableDataItems[e].CLQty+=Number(this.CLQtyNumber),this.paperOutTableDataItems[e].ScanNum=t.list[0].ScanNum,!1}return!0}}};e.default=f}).call(this,a("0de9")["log"])},"91c9":function(t,e,a){var i=a("af96");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("a56519ac",i,!0,{sourceMap:!1,shadowMode:!1})},af96:function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,".margin-text-center[data-v-6a6d281c]{text-align:center;margin:%?20?%}.border-top[data-v-6a6d281c]{border-top:1px solid #eee}.cu-form-group .title[data-v-6a6d281c]{min-width:calc(4em + 15px)}.updete[data-v-6a6d281c]{\r\n\t/* width: 50%; */display:-webkit-box;display:-webkit-flex;display:flex;margin:auto 20px 10px;-webkit-box-pack:end;-webkit-justify-content:flex-end;justify-content:flex-end}.padding-xl[data-v-6a6d281c]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:start;-webkit-justify-content:flex-start;justify-content:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-webkit-flex-direction:column;flex-direction:column}.chucangbtm[data-v-6a6d281c]{position:fixed;bottom:0;width:100%;background-color:#fff;z-index:100}.xunhoutop[data-v-6a6d281c]{position:fixed;width:100%;z-index:500}",""]),t.exports=e},c9dc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={title:"webApp",isRunApp:!1,cookieExpires:1,baseUrl:{dev:"http://192.168.0.218:8080",pro:"http://192.168.0.218:8080"},baseImgUrl:"http://192.168.0.218:8080/clerp-app-api",homeName:"home",plugin:{}};e.default=i},f5cc:function(t,e,a){"use strict";a.r(e);var i=a("5ccb"),n=a("4770");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("5401");var r,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"6a6d281c",null,!1,i["a"],r);e["default"]=u.exports}}]);