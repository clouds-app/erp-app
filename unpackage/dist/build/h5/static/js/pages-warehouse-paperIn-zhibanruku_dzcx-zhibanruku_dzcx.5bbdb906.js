(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-warehouse-paperIn-zhibanruku_dzcx-zhibanruku_dzcx"],{"03a2":function(t,e,a){"use strict";a.r(e);var s=a("7aaa"),r=a.n(s);for(var i in s)"default"!==i&&function(t){a.d(e,t,(function(){return s[t]}))}(i);e["default"]=r.a},"1ec5":function(t,e,a){var s=a("ced2");"string"===typeof s&&(s=[[t.i,s,""]]),s.locals&&(t.exports=s.locals);var r=a("4f06").default;r("e12dec68",s,!0,{sourceMap:!1,shadowMode:!1})},"58be":function(t,e,a){"use strict";(function(t){var s=a("4ea4");a("13d5"),a("a9e3"),a("d3b7"),a("ac1f"),a("25f0"),a("5319"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(a("50ce")),i=(s(a("c9dc")),s(a("ee99"))),n={name:"mixin-base",data:function(){return{pageSetting:{current:1,pageSize:20,total:100},isLoaddingData:!1,otherHeight:0,leftContentHeight:0,avgWidth:90}},computed:{CustomBarHeight:function(){return this.CustomBar},userInfo:function(){var t=r.default.get(this.appConst.CLIENT_USER_CACHE_NAME);return t}},methods:{checkScan:function(){return void 0!==window},addThousandthSign:function(t){if(t){var e=/(\d{1,3})(?=(\d{3})+(?:$|\.))/g;return t.toString().replace(e,"$1,")}return"0.00"},rowClassNameFn:function(t,e){return Number(e)%2==0?"table-single-row":""},onChangeInToCache:function(t,e){e&&e.tokenKey&&r.default.put(String(e.tokenKey),t)},getTableAvgWidth:function(t){var e=0;this.avgWidth=90;var a=0;return t&&t.length>0&&(e=t.length,a=t.reduce((function(t,e){return t+=Number(e.$width?e.$width:0),t}),0)),a>0&&e>0&&(this.avgWidth=~~(a/e)),this.avgWidth},getOrPostDataBy:function(t,e){var a=this;return this.isLoaddingData=!0,this.toast.loading(),new Promise((function(s,r){try{i.default.post(t,e).then((function(t){a.toast.hide(),s(t),a.isLoaddingData=!1})).catch((function(t){a.toast.hide(),r(t),"string"===typeof t?a.toast.message(t):a.toast.message("系统繁忙，请稍后再试!"),a.isLoaddingData=!1}))}catch(n){a.toast.hide(),a.isLoaddingData=!1}}))},getOtherContentHeight:function(){var e=this,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bodyContentHeight";return new Promise((function(s,r){var i=e,n=uni.createSelectorQuery().select("."+a);n.boundingClientRect((function(e){t("log","other Height:"+e.height," at mixins/index.js:118"),i.otherHeight=e.height,e.height,s(e.height)})).exec((function(t){}))}))},setTableHeight:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e||(this.otherHeight=0);try{var a=uni.getSystemInfoSync();return t("log","CustomBar:"+this.CustomBar," at mixins/index.js:134"),this.leftContentHeight=a.windowHeight-this.CustomBar-this.otherHeight-10,this.leftContentHeight}catch(s){}}}};e.default=n}).call(this,a("0de9")["log"])},"7aaa":function(t,e,a){"use strict";(function(t){var s=a("4ea4");a("c975"),a("fb6a"),a("accc"),a("a9e3"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r=s(a("5c5c")),i=s(a("8fde")),n=s(a("c8d6")),o=s(a("ee99")),u=s(a("58be")),p=s(a("a29c")),m={name:"paperIn",components:{zTable:i.default,cuCustom:n.default,searchForm:p.default,selectDropdown:r.default},mixins:[u.default],data:function(){return{stationparams:{type:2,modelCode:"paper_in"},groupparams:{type:2,procType:5,modelCode:"paper_in"},disable:!0,modelVal:null,dataSource:[],deepList:[],workHouseList:[],lineList:[],modalName:null,TabCur:0,scrollLeft:0,dataTableList:[],errorContent:"暂无数据",tableHeight:0,findGoodsTableDataItems:[],paperOutTableDataItems:[],paperInFormItems:{instruct:"",station:"",stationCode:"",fOrderNo:"",line:"",lineCode:"",group:"",groupCode:"",fQty:"",fDNum:"",ArtID:"",CustID:"",CustName:"",INQty:"",FQty:"",LB:"",MinSize:"",Size:"",YxStr:"",Qty:"",Oremark:"",inCount:0,date:(new Date).toISOString().slice(0,10)},findGoodsItem:{fOrderNo:""},paperOutItem:{fOrderNo:"",batch:""}}},mounted:function(){},onReady:function(){},methods:{wrehouseDetalis:function(){uni.navigateTo({url:"rukuDatelis_dzcx?id=".concat(this.paperInFormItems.fOrderNo)})},checkFdNum:function(){var t=this,e=Number(this.paperInFormItems.FQty),a=Number(this.paperInFormItems.INQty),s=Number(this.paperInFormItems.Qty);e>s-a&&uni.showModal({title:"提示",content:"累计入库数已大于订单数,是否继续？",success:function(e){e.cancel&&(t.paperInFormItems.FQty="")}})},resetFrom:function(){this.paperInFormItems.fOrderNo="",this.paperInFormItems.fQty="",this.paperInFormItems.fDNum="",this.paperInFormItems.ArtID="",this.paperInFormItems.CustID="",this.paperInFormItems.CustName="",this.paperInFormItems.INQty="",this.paperInFormItems.LB="",this.paperInFormItems.MinSize="",this.paperInFormItems.Size="",this.paperInFormItems.YxStr="",this.paperInFormItems.Qty="",this.paperInFormItems.Oremark="",this.paperInFormItems.FQty="",this.paperInFormItems.inCount=0},hideModal:function(t){this.modalName=null},tabSelect:function(t){this.TabCur=t.currentTarget.dataset.id,this.scrollLeft=60*(t.currentTarget.dataset.id-1)},turnOnScanCode:function(e){if(void 0===window){var a=this;this.resetFrom(),uni.scanCode({scanType:"barCode",success:function(s){t("log","条码内容："+s.result," at pages/warehouse/paperIn/zhibanruku_dzcx/zhibanruku_dzcx.vue:258");var r=s.result.indexOf(","),i=0;switch(t("log",r," at pages/warehouse/paperIn/zhibanruku_dzcx/zhibanruku_dzcx.vue:261"),i=r<0?s.result:s.result.substring(0,r),t("log",i," at pages/warehouse/paperIn/zhibanruku_dzcx/zhibanruku_dzcx.vue:267"),e){case"in":a.paperInFormItems.fOrderNo=i,a.getParamsFromScanCode();break;case"out":this.paperOutItem.fOrderNo=s.result;break;case"search":this.findGoodsItem.fOrderNo=s.result;break;default:break}}})}else this.toast.message('请在"e包装"公众号中下载APP后扫码!')},barCodeBlur:function(){""!=this.paperInFormItems.lineCode?""!=this.paperInFormItems.groupCode?""!=this.paperInFormItems.stationCode?""!=this.paperInFormItems.fOrderNo?this.getParamsFromScanCode():this.toast.message("请输入或扫描条码"):this.toast.message("请先选择仓位"):this.toast.message("请先选择班别"):this.toast.message("请先选择线别")},getpaperInFormItems:function(t){this.paperInFormItems.ArtID=t.ArtID,this.paperInFormItems.CustID=t.CustID,this.paperInFormItems.CustName=t.CustName,this.paperInFormItems.LB=t.LB,this.paperInFormItems.MinSize=t.MinSize,this.paperInFormItems.Oremark=t.Oremark,this.paperInFormItems.Qty=t.Qty,this.paperInFormItems.INQty=t.INQty,this.paperInFormItems.Size=t.Size,this.paperInFormItems.YxStr=t.YxStr,this.paperInFormItems.FQty=t.FQty,this.paperInFormItems.inCount=t.inCount},getParamsFromScanCode:function(){var t=this,e={OrderNo:this.paperInFormItems.fOrderNo},a=[];this.toast.loading(),o.default.post("/proc/execute/appSpGetPaperCOInfoDzcx",e).then((function(e){if(0===e.list.length)return t.toast.hide(),t.toast.message("对不起，系统没有此工单号，请重新扫描!"),void t.resetFrom();t.disable=!1,t.getpaperInFormItems(e.list[0]),t.toast.hide()})).catch((function(e){t.toast.hide(),t.toast.message("执行失败")})),Object.assign(this.paperInFormItems,a)},paperInRequest:function(t){return o.default.post("/warehouse/warehouse/execute/appSpScanOrderDzcx",t)},ValidateData:function(){var t=!1;return""==this.paperInFormItems.lineCode&&(this.toast.message("请输入线别"),this.disable=!1,t=!0),""==this.paperInFormItems.stationCode&&(this.toast.message("请输入仓位"),this.disable=!1,t=!0),""==this.paperInFormItems.groupCode&&(this.toast.message("请输入班别"),this.disable=!1,t=!0),""==this.paperInFormItems.fOrderNo&&(this.toast.message("请扫描工单号"),this.disable=!1,t=!0),0===this.paperInFormItems.FQty&&(this.toast.message("请输入入库数"),this.disable=!1,t=!0),t},paprtIn:function(){var t=this;if(!this.ValidateData()){var e=this.paperInFormItems.fOrderNo+"*0*"+this.paperInFormItems.FQty+"*"+this.paperInFormItems.lineCode+"*"+this.paperInFormItems.groupCode,a=this.cache.get(this.appConst.CLIENT_USER_CACHE_NAME),s={UserID:a.erpUserCode,BarCodeStr:e,Station:this.paperInFormItems.stationCode,Flag:0,FOrderNo:this.paperInFormItems.fOrderNo,FQty:this.paperInFormItems.FQty,FDNum:0,FLine:this.paperInFormItems.lineCode,FClass:this.paperInFormItems.groupCode,Remark:this.paperInFormItems.Oremark,OrderQty:this.paperInFormItems.Qty,UserPhone:this.userInfo.phoneNo};this.toast.loading(),this.paperInRequest(s).then((function(e){t.toast.hide(),e.list&&1==e.list[0].res?(t.toast.message("入仓成功"),t.resetFrom(),t.disable=!0):(t.toast.message("入仓失败"),t.getParamsFromScanCode())})).catch((function(e){t.toast.hide(),t.toast.message("入仓失败"),t.getParamsFromScanCode()}))}}}};e.default=m}).call(this,a("0de9")["log"])},"939e":function(t,e,a){"use strict";a.r(e);var s=a("9f52"),r=a("03a2");for(var i in r)"default"!==i&&function(t){a.d(e,t,(function(){return r[t]}))}(i);a("cbaf");var n,o=a("f0c5"),u=Object(o["a"])(r["default"],s["b"],s["c"],!1,null,"fdb1927a",null,!1,s["a"],n);e["default"]=u.exports},"9f52":function(t,e,a){"use strict";a.d(e,"b",(function(){return r})),a.d(e,"c",(function(){return i})),a.d(e,"a",(function(){return s}));var s={selectDropdown:a("5c5c").default,searchForm:a("cbc5").default},r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("cu-custom",{staticClass:"titlefrom",attrs:{bgColor:"bg-gradual-blue",isBack:!0}},[a("template",{attrs:{slot:"content"},slot:"content"},[t._v("纸板入库")])],2),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("selectDropdown",{ref:"lineDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindLineSeparation",title:"线ㅤ别",placeholdertext:"ㅤ请选择线别"},model:{value:t.paperInFormItems.lineCode,callback:function(e){t.$set(t.paperInFormItems,"lineCode",e)},expression:"paperInFormItems.lineCode"}})],1),a("v-uni-view",{staticClass:"flex-sub"},[a("selectDropdown",{ref:"groupDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindClassBan",title:"班ㅤ别",placeholdertext:"ㅤ请选择班别",params:t.groupparams},model:{value:t.paperInFormItems.groupCode,callback:function(e){t.$set(t.paperInFormItems,"groupCode",e)},expression:"paperInFormItems.groupCode"}})],1)],1),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("selectDropdown",{ref:"stationDrawer",attrs:{otherHeight:t.CustomBarHeight,url:"appFindSearchStation",title:"仓ㅤ位",placeholdertext:"ㅤ请选择仓位",params:t.stationparams},model:{value:t.paperInFormItems.stationCode,callback:function(e){t.$set(t.paperInFormItems,"stationCode",e)},expression:"paperInFormItems.stationCode"}})],1),a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("日ㅤ期:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.date,callback:function(e){t.$set(t.paperInFormItems,"date",e)},expression:"paperInFormItems.date"}})],1)],1)],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("工单号:")]),a("v-uni-input",{attrs:{placeholder:"请扫描工单号"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.barCodeBlur.apply(void 0,arguments)}},model:{value:t.paperInFormItems.fOrderNo,callback:function(e){t.$set(t.paperInFormItems,"fOrderNo",e)},expression:"paperInFormItems.fOrderNo"}}),a("v-uni-button",{attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.turnOnScanCode("in")}}},[t._v("扫描")])],1),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("客ㅤ户:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.CustName,callback:function(e){t.$set(t.paperInFormItems,"CustName",e)},expression:"paperInFormItems.CustName"}})],1)],1)],1),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("订单数:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.Qty,callback:function(e){t.$set(t.paperInFormItems,"Qty",e)},expression:"paperInFormItems.Qty"}})],1)],1)],1),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("已入库:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.INQty,callback:function(e){t.$set(t.paperInFormItems,"INQty",e)},expression:"paperInFormItems.INQty"}})],1)],1),a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title",staticStyle:{color:"red"}},[t._v("入库数:")]),a("v-uni-input",{attrs:{type:"number",placeholder:"请输入数量"},on:{blur:function(e){arguments[0]=e=t.$handleEvent(e),t.checkFdNum.apply(void 0,arguments)}},model:{value:t.paperInFormItems.FQty,callback:function(e){t.$set(t.paperInFormItems,"FQty",e)},expression:"paperInFormItems.FQty"}})],1)],1)],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("扫描入库次数:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.inCount,callback:function(e){t.$set(t.paperInFormItems,"inCount",e)},expression:"paperInFormItems.inCount"}}),a("v-uni-button",{attrs:{disabled:!(t.paperInFormItems.inCount>0),type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.wrehouseDetalis()}}},[t._v("详情")])],1),a("v-uni-view",{staticClass:"flex border-top"},[a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("纸ㅤ质:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.ArtID,callback:function(e){t.$set(t.paperInFormItems,"ArtID",e)},expression:"paperInFormItems.ArtID"}})],1)],1),a("v-uni-view",{staticClass:"flex-sub"},[a("v-uni-view",{staticClass:"cu-form-group"},[a("v-uni-view",{staticClass:"title"},[t._v("楞ㅤ别:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.LB,callback:function(e){t.$set(t.paperInFormItems,"LB",e)},expression:"paperInFormItems.LB"}})],1)],1)],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("规ㅤ格:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.Size,callback:function(e){t.$set(t.paperInFormItems,"Size",e)},expression:"paperInFormItems.Size"}})],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("压ㅤ线:")]),a("v-uni-input",{attrs:{disabled:!0},model:{value:t.paperInFormItems.YxStr,callback:function(e){t.$set(t.paperInFormItems,"YxStr",e)},expression:"paperInFormItems.YxStr"}})],1),a("v-uni-view",{staticClass:"cu-form-group border-top"},[a("v-uni-view",{staticClass:"title"},[t._v("备ㅤ注:")]),a("v-uni-textarea",{attrs:{disabled:!0,maxlength:"-1"},model:{value:t.paperInFormItems.Oremark,callback:function(e){t.$set(t.paperInFormItems,"Oremark",e)},expression:"paperInFormItems.Oremark"}})],1),a("v-uni-view",{staticClass:"flex solid-bottom padding justify-around chucangbtm"},[a("v-uni-button",{staticClass:"bg-grey radius",attrs:{type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.resetFrom.apply(void 0,arguments)}}},[t._v("清除")]),a("v-uni-button",{staticClass:"bg-grey radius",attrs:{disabled:t.disable,type:"primary",size:"mini"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.paprtIn.apply(void 0,arguments)}}},[t._v("保存")])],1),a("searchForm",{ref:"searchForm",attrs:{dataSource:t.dataSource},on:{getSelectDataInfo:function(e){arguments[0]=e=t.$handleEvent(e),t.getSelectDataInfo.apply(void 0,arguments)}}})],1)},i=[]},c9dc:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s={title:"webApp",isRunApp:!1,cookieExpires:1,baseUrl:{dev:"http://192.168.0.218:8080",pro:"http://192.168.0.218:8080"},baseImgUrl:"http://192.168.0.218:8080/clerp-app-api",homeName:"home",plugin:{}};e.default=s},cbaf:function(t,e,a){"use strict";var s=a("1ec5"),r=a.n(s);r.a},ced2:function(t,e,a){var s=a("24fb");e=s(!1),e.push([t.i,".margin-text-center[data-v-fdb1927a]{text-align:center;margin:%?20?%}.border-top[data-v-fdb1927a]{border-top:1px solid #eee}.cu-form-group .title[data-v-fdb1927a]{min-width:calc(4em + 15px)}.chucangbtm[data-v-fdb1927a]{position:fixed;bottom:0;width:100%;background-color:#fff;z-index:2}",""]),t.exports=e}}]);